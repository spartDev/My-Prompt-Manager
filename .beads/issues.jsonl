{"id":"My-Prompt-Manager-0mi","title":"E2E test: verify MAX_PROMPT_SIZE fix and updatePrompt validation","description":"Create E2E test to ensure the bug fixed in commit 1e499f0 doesn't regress.\n\n**Bug summary:**\n1. MAX_PROMPT_SIZE was 10KB but should be 50KB to support 20K character prompts (20K chars Ã— 2 bytes/char + overhead)\n2. updatePrompt() was missing size validation that savePrompt() had, causing inconsistent behavior\n\n**Test scenarios needed:**\n- Add a prompt near the 20K character limit (~19K chars) - should succeed\n- Update an existing prompt to near 20K characters - should succeed  \n- Both add and update should fail consistently when exceeding limits\n- Verify error messages match between add and update operations","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T17:04:11.022432+01:00","created_by":"spartDev","updated_at":"2026-01-12T17:34:50.1893+01:00","closed_at":"2026-01-12T17:34:50.1893+01:00","close_reason":"Created E2E test file tests/e2e/storage/prompt-size-limits.spec.ts with 5 passing tests that verify the MAX_PROMPT_SIZE fix from commit 1e499f0"}
{"id":"My-Prompt-Manager-2wf","title":"Move assertions out of Page Objects into assertions.ts","description":"## Problem\nPage Object Model best practices state that page objects should not contain assertions. Currently `BasePage.ts` has assertion methods that should live in test files or the assertions utility.\n\n## Current Issues in BasePage.ts\n- `expectSuccessMessage(message)` - performs visibility assertion\n- `expectErrorMessage(message)` - performs visibility assertion\n- `expectElementVisible(locator)` - performs visibility assertion\n- `expectElementHidden(locator)` - performs hidden assertion\n\n## Best Practice\nPage objects should only:\n1. Define locators for page elements\n2. Provide action methods (click, fill, navigate)\n3. Return locators for assertions in tests\n\n## Solution\nRefactor page objects to return locators instead of performing assertions:\n\n**Before:**\n```typescript\nasync expectSuccessMessage(message: string): Promise\u003cvoid\u003e {\n  await expect(this.page.getByText(message).first()).toBeVisible();\n}\n```\n\n**After:**\n```typescript\ngetSuccessMessage(message: string): Locator {\n  return this.page.getByText(message).first();\n}\n// In test: await expect(page.getSuccessMessage('Success')).toBeVisible();\n```\n\n## Acceptance Criteria\n- [ ] `BasePage.ts` has no `expect()` calls\n- [ ] Assertion methods converted to locator-returning methods\n- [ ] Tests updated to use `await expect(pageObject.getX()).toBeVisible()` pattern\n- [ ] `assertions.ts` contains any shared assertion logic\n- [ ] All E2E tests pass after refactoring","acceptance_criteria":"## Acceptance Criteria\n- [ ] `BasePage.ts` has no `expect()` calls\n- [ ] Assertion methods converted to locator-returning methods\n- [ ] Tests updated to use `await expect(pageObject.getX()).toBeVisible()` pattern\n- [ ] `assertions.ts` contains any shared assertion logic\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:46.653884+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:29:18.140128+01:00","closed_at":"2026-01-12T22:29:18.140128+01:00","close_reason":"Refactored BasePage.ts to use locator-returning methods instead of assertions. All 96 E2E tests and 1505 unit tests pass."}
{"id":"My-Prompt-Manager-3w4","title":"Replace SVG path selectors with data-testid attributes","description":"## Problem\nClose and back buttons are identified using SVG path data selectors which are extremely fragile. Any icon library update or SVG optimization will break these selectors.\n\n## Current Issues\n- `BasePage.ts:66-69` uses `path[d=\"M6 18L18 6M6 6l12 12\"]` for close button\n- `BasePage.ts:75-78` uses `path[d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"]` for back button\n- Same pattern in `selectors.ts:74-75` and multiple test files\n- SVG paths can change with icon updates, library changes, or optimizations\n\n## Solution\nAdd `data-testid` attributes to close/back buttons in React components and use `getByTestId()` in tests.\n\n## Files to Modify\n**React Components:**\n- Add `data-testid=\"close-modal\"` to modal close buttons\n- Add `data-testid=\"back-button\"` to navigation back buttons\n\n**Test Files:**\n- `tests/e2e/pages/BasePage.ts`\n- `tests/e2e/utils/selectors.ts`\n- Any test files using SVG path selectors","acceptance_criteria":"## Acceptance Criteria\n- [ ] Close buttons have `data-testid=\"close-modal\"` attribute\n- [ ] Back buttons have `data-testid=\"back-button\"` attribute\n- [ ] `playwright.config.ts` has `testIdAttribute: 'data-testid'` configured\n- [ ] `BasePage.ts` uses `getByTestId()` instead of SVG path selectors\n- [ ] No SVG `path[d=\"...\"]` selectors remain in test code\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:41.936528+01:00","created_by":"spartDev","updated_at":"2026-01-12T21:49:01.700532+01:00","closed_at":"2026-01-12T21:49:01.700532+01:00","close_reason":"Replaced all SVG path selectors with data-testid attributes. All 1505 tests pass."}
{"id":"My-Prompt-Manager-dcu","title":"Usage Analytics Dashboard","description":"30-day rolling analytics dashboard showing prompt usage patterns across time, platforms, and categories. Includes compact tab view with summary cards and full-page dashboard with Recharts visualizations. Design doc: docs/plans/2026-01-12-usage-analytics-dashboard-design.md","status":"in_progress","priority":2,"issue_type":"epic","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:58:30.21399+01:00","created_by":"spartDev","updated_at":"2026-01-13T11:57:51.670557+01:00"}
{"id":"My-Prompt-Manager-dcu.1","title":"UsageTracker service + storage integration","description":"Create UsageTracker singleton service with methods: record(), getHistory(), clearHistory(), cleanup(). Store UsageEvent objects in Chrome local storage under 'usageHistory' key. Include 30-day retention cleanup on init.","status":"in_progress","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:07.179476+01:00","created_by":"spartDev","updated_at":"2026-01-13T11:57:51.736322+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.1","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:07.180409+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.2","title":"useUsageStats hook with aggregation logic","description":"Create React hook that queries UsageTracker and aggregates data into chart-ready structures: dailyUsage, platformBreakdown, dayOfWeekDistribution, timeOfDayDistribution, categoryDistribution, topPrompts, recentPrompts, forgottenPrompts.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:08.208471+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:08.208471+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.2","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:08.209449+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.2","depends_on_id":"My-Prompt-Manager-dcu.1","type":"blocks","created_at":"2026-01-12T22:59:30.552486+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.3","title":"AnalyticsTab with summary cards","description":"Create compact Analytics tab view for popup/side panel. Include 2x2 grid of SummaryCard components showing: total uses, top platform, peak day, top category. Add top 5 prompts list and expand button.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:09.215633+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:09.215633+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.3","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:09.216487+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.3","depends_on_id":"My-Prompt-Manager-dcu.2","type":"blocks","created_at":"2026-01-12T22:59:34.279383+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.4","title":"Install Recharts + build chart components","description":"Add Recharts dependency (~40KB). Create chart components: UsageLineChart (30-day trend), PlatformPieChart (donut), DayOfWeekChart (vertical bar), CategoryBarChart (horizontal bar), TimeOfDayChart (buckets).","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:10.28256+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:10.28256+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.4","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:10.283313+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.4","depends_on_id":"My-Prompt-Manager-dcu.2","type":"blocks","created_at":"2026-01-12T22:59:35.27725+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.5","title":"Full-page dashboard layout","description":"Create analytics.tsx page entry point and AnalyticsDashboard container. Layout: header with back button, line chart row, 2x2 chart grid (platform pie, day-of-week bar, category bar, time-of-day), prompt tables with tabs (Most Used, Recently Used, Forgotten).","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:11.2908+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:11.2908+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:11.291592+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu.3","type":"blocks","created_at":"2026-01-12T22:59:36.340492+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu.4","type":"blocks","created_at":"2026-01-12T22:59:37.370128+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.6","title":"Integration: wire up recording in PromptLibraryInjector","description":"Call UsageTracker.getInstance().record() when prompt is inserted into AI platform. Pass promptId, platform identifier, and categoryId. Update manifest.json if needed for analytics page.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:12.324072+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:12.324072+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.6","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:12.324895+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.6","depends_on_id":"My-Prompt-Manager-dcu.1","type":"blocks","created_at":"2026-01-12T22:59:38.523731+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.7","title":"Polish: dark mode, empty states, loading states","description":"Ensure all analytics components respect dark mode via Tailwind theme. Add empty state UI when no usage data exists. Add loading skeletons while data loads. Add clear history confirmation modal.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:13.337959+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:13.337959+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.7","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:13.338764+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.7","depends_on_id":"My-Prompt-Manager-dcu.5","type":"blocks","created_at":"2026-01-12T22:59:39.54575+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.8","title":"Testing: unit, component, E2E","description":"Unit tests for UsageTracker (record, getHistory, cleanup, clearHistory, date boundaries). Component tests for AnalyticsTab, charts, PromptTable (sorting, tabs, dark mode). E2E tests for record usage flow, clear history, full page navigation.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:14.348393+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:59:14.348393+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:14.34929+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu.6","type":"blocks","created_at":"2026-01-12T22:59:40.617856+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu.7","type":"blocks","created_at":"2026-01-12T22:59:41.614359+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-djt","title":"Consolidate or remove unused SELECTORS module","description":"## Problem\n`tests/e2e/utils/selectors.ts` defines a `SELECTORS` object with CSS-based selectors, but tests primarily use inline role-based locators. This creates two inconsistent selector systems.\n\n## Current State\n**selectors.ts defines:**\n```typescript\nSELECTORS = {\n  headings: { promptManager: 'heading[name=\"My Prompt Manager\"]' },\n  buttons: { addNewPrompt: 'button[name=\"Add new prompt\"]' },\n  // ... 90+ selectors\n}\n```\n\n**But tests use:**\n```typescript\npage.getByRole('button', { name: 'Add new prompt' })  // Not using SELECTORS\npage.getByRole('heading', { name: 'My Prompt Manager' })\n```\n\n## Options\n\n### Option A: Remove SELECTORS module (Recommended)\n- Delete `selectors.ts`\n- Standardize on inline role-based locators\n- Simpler, follows Playwright best practices\n\n### Option B: Update SELECTORS to use createSelectors pattern\n- Refactor `createSelectors(page)` to return role-based locators\n- Update all tests to use centralized selectors\n- More complex but provides single source of truth\n\n## Acceptance Criteria\n- [ ] Decision made: remove or refactor SELECTORS module\n- [ ] No mixed selector strategies in codebase\n- [ ] If removed: all inline locators use role-based strategy\n- [ ] If refactored: all tests use centralized selectors\n- [ ] All E2E tests pass","acceptance_criteria":"## Acceptance Criteria\n- [ ] Decision made: remove or refactor SELECTORS module\n- [ ] No mixed selector strategies in codebase\n- [ ] If removed: all inline locators use role-based strategy\n- [ ] If refactored: all tests use centralized selectors\n- [ ] All E2E tests pass","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:51.906155+01:00","created_by":"spartDev","updated_at":"2026-01-12T19:12:48.056366+01:00"}
{"id":"My-Prompt-Manager-j32","title":"Fix prompt size validation: prompts under 10K chars incorrectly rejected","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-12T16:40:14.901861+01:00","created_by":"spartDev","updated_at":"2026-01-12T16:40:34.569141+01:00","closed_at":"2026-01-12T16:40:34.569141+01:00","close_reason":"Fixed: Increased MAX_PROMPT_SIZE from 10KB to 50KB to accommodate 20K character limit (20K chars Ã— 2 bytes/char + overhead). Also added size validation to updatePrompt for consistency."}
{"id":"My-Prompt-Manager-sj5","title":"Fix unsafe assignment lint error in tests/e2e/utils/index.ts:43","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:33:04.88157+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:38:57.649716+01:00","closed_at":"2026-01-12T22:38:57.649716+01:00","close_reason":"Removed reference to non-existent SELECTORS export from E2EUtils.Selectors"}
{"id":"My-Prompt-Manager-vrq","title":"Remove console.log statements from E2E tests","description":"## Problem\nE2E tests contain `console.log` statements for debugging/progress tracking. These clutter test output and don't integrate with Playwright's built-in reporting.\n\n## Current Issues\n`power-user-management.spec.ts` contains:\n```typescript\nconsole.log('[TEST] Starting Scenario 1: Bulk category reorganization');\nconsole.log('[TEST] Starting Scenario 2: Category consolidation');\nconsole.log('[TEST] All power user scenarios validated successfully! ðŸŽ‰');\n```\n\n## Solution\nReplace console.log with Playwright's `test.step()` for proper test reporting:\n\n**Before:**\n```typescript\nconsole.log('[TEST] Starting Scenario 1: Bulk category reorganization');\n// ... test code\n```\n\n**After:**\n```typescript\nawait test.step('Scenario 1: Bulk category reorganization', async () =\u003e {\n  // ... test code\n});\n```\n\n## Benefits\n- Steps appear in HTML report with timing\n- Better failure diagnostics\n- Cleaner test output\n- Integrates with CI/CD reporters\n\n## Acceptance Criteria\n- [ ] No `console.log` statements in any E2E test files\n- [ ] Scenario steps use `test.step()` where appropriate\n- [ ] All E2E tests pass\n- [ ] HTML report shows step breakdowns","acceptance_criteria":"## Acceptance Criteria\n- [ ] No `console.log` statements in any E2E test files\n- [ ] Scenario steps use `test.step()` where appropriate\n- [ ] All E2E tests pass\n- [ ] HTML report shows step breakdowns","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:49.590101+01:00","created_by":"spartDev","updated_at":"2026-01-12T19:12:30.440893+01:00"}
{"id":"My-Prompt-Manager-vx1","title":"Split power-user-management.spec.ts into isolated tests","description":"## Problem\n`power-user-management.spec.ts` is a single 440-line test containing 5 scenarios that share state. This violates test isolation principles and makes debugging difficult.\n\n## Current Structure\n```typescript\ntest('should handle advanced prompt organization workflow', async () =\u003e {\n  // Scenario 1: Bulk category reorganization (lines 1-100)\n  // Scenario 2: Category consolidation (lines 101-200)\n  // Scenario 3: Advanced search \u0026 filtering (lines 201-280)\n  // Scenario 4: Bulk prompt operations (lines 281-350)\n  // Scenario 5: Data export for backup (lines 351-440)\n});\n```\n\n## Problems\n1. **State Accumulation**: Each scenario depends on previous scenario's state\n2. **Debugging Difficulty**: Can't run Scenario 4 in isolation\n3. **Flaky Tests**: Failure in Scenario 2 causes all subsequent scenarios to fail\n4. **Slow Feedback**: Must run entire test even if only testing one scenario\n\n## Solution\nSplit into isolated tests with shared setup:\n\n```typescript\ntest.describe('Power User Management', () =\u003e {\n  test.beforeEach(async ({ storage }) =\u003e {\n    await testDataManager.seedForPowerUserTesting();\n  });\n\n  test('should rename category and verify prompts updated', async () =\u003e {});\n  test('should consolidate categories by moving prompts', async () =\u003e {});\n  test('should filter and search across categories', async () =\u003e {});\n  test('should move prompts between categories', async () =\u003e {});\n  test('should export library data for backup', async () =\u003e {});\n});\n```","notes":"## Acceptance Criteria\n- [ ] Each scenario is a separate test function\n- [ ] Tests can run independently in any order\n- [ ] Shared setup in `beforeEach` seeds consistent initial state\n- [ ] No test depends on another test's side effects\n- [ ] All tests pass when run individually: `npx playwright test -g \"scenario name\"`\n- [ ] All tests pass when run in parallel\n- [ ] Test file is under 300 lines (split further if needed)","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:54.730058+01:00","created_by":"spartDev","updated_at":"2026-01-13T11:53:30.504873+01:00","closed_at":"2026-01-13T11:53:30.504873+01:00","close_reason":"Split single 437-line test into 5 isolated tests with shared seed data factory. Tests now run in parallel and can be debugged individually."}
{"id":"My-Prompt-Manager-xkr","title":"Standardize locator strategy to role-based selectors","description":"## Problem\nE2E tests use inconsistent locator strategies. Some tests correctly use role-based locators (`getByRole`, `getByLabel`) while others use CSS selectors that are fragile and tied to DOM structure.\n\n## Current Issues\n- `selectors.ts` defines CSS-based selectors like `'heading[name=\"My Prompt Manager\"]'`\n- Tests use `page.locator('div').filter({ hasText: '...' })` patterns\n- `page.locator('input[placeholder=\"Category name\"]')` instead of `getByPlaceholder()`\n\n## Solution\nStandardize on Playwright's recommended locator priority:\n1. `getByRole()` - buttons, headings, links, etc.\n2. `getByLabel()` - form inputs with labels\n3. `getByPlaceholder()` - inputs with placeholder text\n4. `getByText()` - visible text content\n5. `getByTestId()` - only when above options don't work\n\n## Acceptance Criteria\n- [ ] All tests use role-based locators where possible\n- [ ] No CSS class selectors (`.class-name`) in test code\n- [ ] No DOM structure selectors (`div \u003e span`) in test code\n- [ ] `selectors.ts` updated or removed in favor of inline role-based locators\n- [ ] All E2E tests pass after refactoring","acceptance_criteria":"## Acceptance Criteria\n- [ ] All tests use role-based locators where possible\n- [ ] No CSS class selectors (`.class-name`) in test code\n- [ ] No DOM structure selectors (`div \u003e span`) in test code\n- [ ] `selectors.ts` updated or removed in favor of inline role-based locators\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:44.521776+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:13:39.792211+01:00","closed_at":"2026-01-12T22:13:39.792211+01:00","close_reason":"Standardized locator strategy to role-based selectors across all E2E tests"}
