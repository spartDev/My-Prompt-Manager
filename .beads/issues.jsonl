{"id":"My-Prompt-Manager-02t","title":"Add concurrent operation tests for clearHistory()","description":"## Context\nPR #251 added withLock() to clearHistory() to fix a race condition, but there are no tests verifying the fix.\n\n## Missing Tests\n- Concurrent clearHistory() + record() operations\n- Concurrent clearHistory() + cleanup() operations\n- Concurrent clearHistory() + clearHistory() operations\n\n## Files\n- `src/services/UsageTracker.ts` (lines 167-175)\n- `src/services/__tests__/UsageTracker.test.ts`\n\n## Acceptance Criteria\n- [ ] Test concurrent clearHistory() and record() don't corrupt data\n- [ ] Test concurrent clearHistory() and cleanup() don't corrupt data\n- [ ] Verify operations are properly serialized by mutex","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T16:49:51.767835+01:00","created_by":"spartDev","updated_at":"2026-01-20T16:56:40.451569+01:00","closed_at":"2026-01-20T16:56:40.451569+01:00","close_reason":"Tests added and verified passing"}
{"id":"My-Prompt-Manager-02y","title":"Move runtime constants from types to constants file","description":"DEFAULT_SETTINGS, VALIDATION_LIMITS, PROMPT_SHARING_SIZE_LIMITS, USAGE_RETENTION_DAYS are runtime values exported from types/index.ts. Move to src/constants.ts for cleaner separation.","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:49.1066+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:49.1066+01:00"}
{"id":"My-Prompt-Manager-0mi","title":"E2E test: verify MAX_PROMPT_SIZE fix and updatePrompt validation","description":"Create E2E test to ensure the bug fixed in commit 1e499f0 doesn't regress.\n\n**Bug summary:**\n1. MAX_PROMPT_SIZE was 10KB but should be 50KB to support 20K character prompts (20K chars × 2 bytes/char + overhead)\n2. updatePrompt() was missing size validation that savePrompt() had, causing inconsistent behavior\n\n**Test scenarios needed:**\n- Add a prompt near the 20K character limit (~19K chars) - should succeed\n- Update an existing prompt to near 20K characters - should succeed  \n- Both add and update should fail consistently when exceeding limits\n- Verify error messages match between add and update operations","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T17:04:11.022432+01:00","created_by":"spartDev","updated_at":"2026-01-12T17:34:50.1893+01:00","closed_at":"2026-01-12T17:34:50.1893+01:00","close_reason":"Created E2E test file tests/e2e/storage/prompt-size-limits.spec.ts with 5 passing tests that verify the MAX_PROMPT_SIZE fix from commit 1e499f0"}
{"id":"My-Prompt-Manager-0n5","title":"Refactor Analytics header to use ViewHeader component","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:51:24.364166+01:00","created_by":"spartDev","updated_at":"2026-01-13T14:03:12.791313+01:00","closed_at":"2026-01-13T14:03:12.791313+01:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"My-Prompt-Manager-0n5","author":"spartDev","text":"Replace inline header in AnalyticsTab.tsx (lines 179-219) with the shared ViewHeader component to match LibraryView and SettingsView patterns. Import ViewHeader and use icon='analytics', title='Analytics', subtitle='Last 30 days of usage'.","created_at":"2026-01-13T12:52:30Z"}]}
{"id":"My-Prompt-Manager-11v","title":"Add test coverage for UsageTracker quota protection","description":"## Context\nPR #251 introduced quota protection to UsageTracker but lacks test coverage.\n\n## Missing Tests\n- `trimOldEvents()` private method behavior\n- Proactive cleanup triggering at CLEANUP_THRESHOLD (9,000 events)\n- Hard limit enforcement at MAX_EVENTS (10,000 events)\n- Logging verification for both cleanup scenarios\n\n## Files\n- `src/services/UsageTracker.ts` (lines 68-91, 106-109)\n- `src/services/__tests__/UsageTracker.test.ts`\n\n## Acceptance Criteria\n- [ ] Test proactive cleanup triggers at 9,000 events\n- [ ] Test hard limit removes oldest events at 10,000\n- [ ] Test trimOldEvents filters by retention period\n- [ ] Verify appropriate logging calls","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T16:49:50.755321+01:00","created_by":"spartDev","updated_at":"2026-01-20T16:56:40.429919+01:00","closed_at":"2026-01-20T16:56:40.429919+01:00","close_reason":"Tests added and verified passing"}
{"id":"My-Prompt-Manager-1dn","title":"Add analyticsAssertions to assertions.ts","description":"Add analyticsAssertions object to tests/e2e/utils/assertions.ts. Include: tabLoaded, dashboardLoaded, emptyState, totalUses, topPlatform, peakDay, topCategory, promptInTopList, topPromptsCount, trophyIconsVisible, clearHistoryModalVisible/Hidden, expandButtonVisible/Hidden, tabSelected, chartVisible. Add to main assertions export.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:06.175519+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:37:47.607951+01:00","closed_at":"2026-01-16T14:37:47.607951+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-1f5","title":"Add floating action button for View Full Dashboard","description":"Add a floating action button (FAB) with gradient styling positioned at bottom-right. Use purple-indigo gradient, shadow, and focus-primary class per design system","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T12:41:39.996658+01:00","created_by":"spartDev","updated_at":"2026-01-16T12:46:29.0113+01:00","closed_at":"2026-01-16T12:46:29.0113+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-1lg","title":"Add ANALYTICS_FIXTURES to test-data.ts","description":"Add to tests/e2e/fixtures/test-data.ts: ANALYTICS_FIXTURES with EMPTY, SINGLE_USAGE, VARIED_USAGE, MULTI_PLATFORM scenarios. Add createAnalyticsScenario helper function that generates prompts, categories, and usageHistory.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:08.880112+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:37:47.677486+01:00","closed_at":"2026-01-16T14:37:47.677486+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-1w6","title":"Type platform field as union literal instead of string","description":"UsageEvent.platform (index.ts:16-17) is typed as string but should be union literal: 'claude' | 'chatgpt' | 'gemini' | 'perplexity' | 'copilot' | 'mistral' | 'custom'. Create PlatformType type.","status":"open","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:39.355454+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:39.355454+01:00"}
{"id":"My-Prompt-Manager-2jr","title":"Add quota protection to UsageTracker","description":"UsageTracker.ts:59-63 - StorageManager has quota checks, UsageTracker writes blindly. 30 days of heavy usage = thousands of events = storage quota blown. Add a max event count or proactive cleanup.","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:35.006476+01:00","created_by":"spartDev","updated_at":"2026-01-20T16:00:59.950463+01:00","closed_at":"2026-01-20T16:00:59.950463+01:00","close_reason":"Fixed: all tests pass"}
{"id":"My-Prompt-Manager-2wf","title":"Move assertions out of Page Objects into assertions.ts","description":"## Problem\nPage Object Model best practices state that page objects should not contain assertions. Currently `BasePage.ts` has assertion methods that should live in test files or the assertions utility.\n\n## Current Issues in BasePage.ts\n- `expectSuccessMessage(message)` - performs visibility assertion\n- `expectErrorMessage(message)` - performs visibility assertion\n- `expectElementVisible(locator)` - performs visibility assertion\n- `expectElementHidden(locator)` - performs hidden assertion\n\n## Best Practice\nPage objects should only:\n1. Define locators for page elements\n2. Provide action methods (click, fill, navigate)\n3. Return locators for assertions in tests\n\n## Solution\nRefactor page objects to return locators instead of performing assertions:\n\n**Before:**\n```typescript\nasync expectSuccessMessage(message: string): Promise\u003cvoid\u003e {\n  await expect(this.page.getByText(message).first()).toBeVisible();\n}\n```\n\n**After:**\n```typescript\ngetSuccessMessage(message: string): Locator {\n  return this.page.getByText(message).first();\n}\n// In test: await expect(page.getSuccessMessage('Success')).toBeVisible();\n```\n\n## Acceptance Criteria\n- [ ] `BasePage.ts` has no `expect()` calls\n- [ ] Assertion methods converted to locator-returning methods\n- [ ] Tests updated to use `await expect(pageObject.getX()).toBeVisible()` pattern\n- [ ] `assertions.ts` contains any shared assertion logic\n- [ ] All E2E tests pass after refactoring","acceptance_criteria":"## Acceptance Criteria\n- [ ] `BasePage.ts` has no `expect()` calls\n- [ ] Assertion methods converted to locator-returning methods\n- [ ] Tests updated to use `await expect(pageObject.getX()).toBeVisible()` pattern\n- [ ] `assertions.ts` contains any shared assertion logic\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:46.653884+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:29:18.140128+01:00","closed_at":"2026-01-12T22:29:18.140128+01:00","close_reason":"Refactored BasePage.ts to use locator-returning methods instead of assertions. All 96 E2E tests and 1505 unit tests pass."}
{"id":"My-Prompt-Manager-2xi","title":"Document that findDuplicatePrompts progress values are normalized","description":"The onProgress callback in findDuplicatePrompts reports inflated completedComparisons values to ensure progress reaches 100%. The actual comparisons performed are lower due to bucketing optimization. Add JSDoc comment explaining this behavior for consumers of the callback.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T17:51:17.648101+01:00","created_by":"spartDev","updated_at":"2026-01-20T18:05:17.353297+01:00","closed_at":"2026-01-20T18:05:17.353297+01:00","close_reason":"Implemented: 33 unit tests, JSDoc documentation, adaptive bucket range"}
{"id":"My-Prompt-Manager-2y4","title":"Update component type definitions","description":"Update src/types/components.ts: Remove onManageCategories from FilterSortControlsProps. Add FooterToolbarProps if not co-located with component.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:57.758815+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:03:42.062269+01:00","closed_at":"2026-01-20T22:03:42.062269+01:00","close_reason":"Deferred - Categories button removal reverted because FooterToolbar (replacement navigation) was never merged. Will revisit when feat/footer-toolbar-redesign is merged.","dependencies":[{"issue_id":"My-Prompt-Manager-2y4","depends_on_id":"My-Prompt-Manager-7m2","type":"blocks","created_at":"2026-01-13T22:45:11.598295+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-35h","title":"Extract shared utilities - eliminate copy-paste code","description":"ensureStorageAvailable is copy-pasted in storage.ts:684-701 AND UsageTracker.ts:92-109. withLock mutex pattern duplicated in storage.ts:779-817 AND UsageTracker.ts:199-232. This is DRY violation 101. Extract to src/utils/chromeStorage.ts and src/utils/asyncMutex.ts.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:46.671682+01:00","created_by":"spartDev","updated_at":"2026-01-20T17:19:04.87615+01:00","closed_at":"2026-01-20T17:19:04.87615+01:00","close_reason":"Extracted ensureStorageAvailable to chromeStorage.ts and AsyncMutex to asyncMutex.ts. Both services updated to use shared utilities.","dependencies":[{"issue_id":"My-Prompt-Manager-35h","depends_on_id":"My-Prompt-Manager-akm","type":"blocks","created_at":"2026-01-19T23:30:11.262587+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-35h","depends_on_id":"My-Prompt-Manager-2jr","type":"blocks","created_at":"2026-01-19T23:30:12.254368+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-36x","title":"Write tests for FooterToolbar component","description":"Create src/components/__tests__/FooterToolbar.test.tsx with tests for: rendering all buttons, click handlers, stats display, loading state, dark mode classes, accessibility attributes.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:58.737561+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:32:43.479938+01:00","closed_at":"2026-01-14T16:32:43.479938+01:00","close_reason":"Tests already exist with comprehensive coverage - 25 tests covering rendering, click handlers, stats display, loading state, keyboard navigation, button titles, and styling","dependencies":[{"issue_id":"My-Prompt-Manager-36x","depends_on_id":"My-Prompt-Manager-vaf","type":"blocks","created_at":"2026-01-13T22:45:12.564024+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-36x","depends_on_id":"My-Prompt-Manager-egu","type":"blocks","created_at":"2026-01-13T22:45:12.657982+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-3l8","title":"Create analytics-tab.spec.ts E2E tests","description":"Create tests/e2e/analytics/analytics-tab.spec.ts. Test scenarios: renders analytics tab, empty state, summary cards (total uses, top platform, top category), top prompts list (sorted, trophy icons), FAB visibility (sidepanel vs popup, with/without data), back navigation.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:09.767226+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:50:30.949547+01:00","closed_at":"2026-01-16T14:50:30.949547+01:00","close_reason":"Created E2E test files with comprehensive test coverage","dependencies":[{"issue_id":"My-Prompt-Manager-3l8","depends_on_id":"My-Prompt-Manager-6rp","type":"blocks","created_at":"2026-01-16T13:26:20.57824+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-3l8","depends_on_id":"My-Prompt-Manager-1dn","type":"blocks","created_at":"2026-01-16T13:26:20.665799+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-3l8","depends_on_id":"My-Prompt-Manager-d70","type":"blocks","created_at":"2026-01-16T13:26:20.753927+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-3l8","depends_on_id":"My-Prompt-Manager-bpx","type":"blocks","created_at":"2026-01-16T13:26:20.845013+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-3l8","depends_on_id":"My-Prompt-Manager-1lg","type":"blocks","created_at":"2026-01-16T13:26:20.937659+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-3w4","title":"Replace SVG path selectors with data-testid attributes","description":"## Problem\nClose and back buttons are identified using SVG path data selectors which are extremely fragile. Any icon library update or SVG optimization will break these selectors.\n\n## Current Issues\n- `BasePage.ts:66-69` uses `path[d=\"M6 18L18 6M6 6l12 12\"]` for close button\n- `BasePage.ts:75-78` uses `path[d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"]` for back button\n- Same pattern in `selectors.ts:74-75` and multiple test files\n- SVG paths can change with icon updates, library changes, or optimizations\n\n## Solution\nAdd `data-testid` attributes to close/back buttons in React components and use `getByTestId()` in tests.\n\n## Files to Modify\n**React Components:**\n- Add `data-testid=\"close-modal\"` to modal close buttons\n- Add `data-testid=\"back-button\"` to navigation back buttons\n\n**Test Files:**\n- `tests/e2e/pages/BasePage.ts`\n- `tests/e2e/utils/selectors.ts`\n- Any test files using SVG path selectors","acceptance_criteria":"## Acceptance Criteria\n- [ ] Close buttons have `data-testid=\"close-modal\"` attribute\n- [ ] Back buttons have `data-testid=\"back-button\"` attribute\n- [ ] `playwright.config.ts` has `testIdAttribute: 'data-testid'` configured\n- [ ] `BasePage.ts` uses `getByTestId()` instead of SVG path selectors\n- [ ] No SVG `path[d=\"...\"]` selectors remain in test code\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:41.936528+01:00","created_by":"spartDev","updated_at":"2026-01-12T21:49:01.700532+01:00","closed_at":"2026-01-12T21:49:01.700532+01:00","close_reason":"Replaced all SVG path selectors with data-testid attributes. All 1505 tests pass."}
{"id":"My-Prompt-Manager-4bz","title":"Add unit tests for findDuplicatePrompts safeguards","description":"PR #253 added safeguards to findDuplicatePrompts but no unit tests. Need tests for:\n- Prompt count limit enforcement (throws when \u003e maxPrompts without allowLargeDatasets)\n- allowLargeDatasets bypass (processes large collections when true)\n- Timeout behavior (throws after timeoutMs)\n- Progress reporting accuracy after bucketing optimization\n- Length bucket edge cases at bucket boundaries (e.g., 199-char vs 201-char prompts)","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T17:51:16.663278+01:00","created_by":"spartDev","updated_at":"2026-01-20T18:05:17.350313+01:00","closed_at":"2026-01-20T18:05:17.350313+01:00","close_reason":"Implemented: 33 unit tests, JSDoc documentation, adaptive bucket range"}
{"id":"My-Prompt-Manager-4d6","title":"Fix double comparisons in duplicate detection bucket filter","description":"getCandidatesFromBuckets returns all prompts in adjacent buckets not in processedIds, but processedIds only populates when duplicates are found. This causes each pair to be compared twice in the common no-duplicate case, doubling work and making the 10s timeout more likely to trigger.\n\nFix: Store original index in buckets and filter candidates to only include prompts with index \u003e currentIndex, restoring the original forward-only comparison behavior.","status":"closed","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-20T19:49:23.481171+01:00","created_by":"spartDev","updated_at":"2026-01-20T19:52:09.739981+01:00","closed_at":"2026-01-20T19:52:09.739981+01:00","close_reason":"Fixed: store index in buckets, filter candidates by index \u003e currentIndex for forward-only comparison"}
{"id":"My-Prompt-Manager-4lq","title":"Footer Toolbar Redesign","description":"Consolidate Analytics, Categories, and Settings buttons into a unified footer toolbar. Improves discoverability while respecting 400px width constraint. See docs/plans/footer-toolbar-redesign.md for full plan.","status":"closed","priority":2,"issue_type":"feature","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:39.082024+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:55:11.218043+01:00","closed_at":"2026-01-14T16:55:11.218043+01:00","close_reason":"Feature complete: FooterToolbar component implemented, integrated into LibraryView, all tests passing (1711), manual verification confirmed."}
{"id":"My-Prompt-Manager-5v9","title":"Consider direct imports instead of barrel file in hooks/index.ts","description":"Per Vercel bundle-barrel-imports rule, barrel files can hurt tree-shaking.\n\nModern bundlers handle this well, but direct imports are more explicit and guaranteed to tree-shake properly.\n\n**Low priority** - only address if bundle size becomes a concern.","status":"open","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:41.471448+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:33:41.471448+01:00"}
{"id":"My-Prompt-Manager-5wv","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"open","priority":2,"issue_type":"molecule","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:32.498301+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:32.498301+01:00"}
{"id":"My-Prompt-Manager-666","title":"Simplify ViewHeader in LibraryView","description":"Update LibraryView to remove AnalyticsButton and SettingsButton from ViewHeader.Actions. Only CloseButton should remain for sidepanel context. Navigation moves to FooterToolbar.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:55.82073+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:42:02.850523+01:00","closed_at":"2026-01-14T16:42:02.850523+01:00","close_reason":"Removed AnalyticsButton and SettingsButton from ViewHeader.Actions in LibraryView. Only CloseButton remains for sidepanel context. Updated LibraryView.test.tsx and App.analytics.test.tsx to reflect the change. All tests pass.","dependencies":[{"issue_id":"My-Prompt-Manager-666","depends_on_id":"My-Prompt-Manager-egu","type":"blocks","created_at":"2026-01-13T22:45:11.504823+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-66b","title":"Add type guard to getChromeMock helper","description":"getChromeMock() (test-helpers.ts:86) uses type assertion without guard. Should use isGlobalWithMocks guard for safety or document why assertion is safe.","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:52.00196+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:52.00196+01:00"}
{"id":"My-Prompt-Manager-6jp","title":"Deduplicate SortOrder/SortDirection type definitions","description":"SortOrder and SortDirection are defined twice - inline in Settings interface (index.ts:31-32) and as separate types (index.ts:38-39). Settings should reference the type aliases.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:45.162816+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:45.162816+01:00"}
{"id":"My-Prompt-Manager-6k6","title":"Replace custom useDarkMode with ThemeProvider in analytics.tsx","description":"## Task\nRefactor analytics.tsx to use the same theme system as the rest of the app.\n\n## Changes Required\n1. Import ThemeProvider and useThemeContext from contexts/ThemeContext\n2. Remove the custom useDarkMode hook (lines 11-37)\n3. Wrap AnalyticsPage in ThemeProvider\n4. Use useThemeContext().resolvedTheme to get isDarkMode value\n5. Remove manual dark class manipulation (handled by useTheme)\n\n## Acceptance Criteria\n- Analytics page respects user theme preference from settings\n- Switching theme in settings immediately updates analytics page\n- System theme preference still works when user has 'system' selected","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T17:43:25.92746+01:00","created_by":"spartDev","updated_at":"2026-01-13T17:47:05.298668+01:00","closed_at":"2026-01-13T17:47:05.298668+01:00","close_reason":"Refactored analytics.tsx to use ThemeProvider instead of custom useDarkMode hook"}
{"id":"My-Prompt-Manager-6rp","title":"Create AnalyticsPage POM","description":"Create tests/e2e/pages/AnalyticsPage.ts extending BasePage. Include methods: navigateToAnalyticsTab, openFullDashboard, getSummaryCard, getTopPromptsSection, getTopPromptItems, getExpandDashboardButton, getClearHistoryButton, getClearHistoryModal, getTab, switchTab, confirmClearHistory. Follow existing POM pattern - return Locators not assertions.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:05.269982+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:37:47.585405+01:00","closed_at":"2026-01-16T14:37:47.585405+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-79d","title":"Remove unused timeoutRef in useToast","description":"useToast.ts:25 - timeoutRef is declared but never used to auto-dismiss toasts.\n\n```typescript\nconst timeoutRef = useRef\u003cNodeJS.Timeout | null\u003e(null);\n```\n\nEither implement auto-dismiss using this ref or remove the dead code.","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:24.086058+01:00","created_by":"spartDev","updated_at":"2026-01-21T09:23:13.751064+01:00","closed_at":"2026-01-21T09:23:13.751064+01:00","close_reason":"Removed unused timeoutRef and related cleanup code. Auto-dismiss is handled by Toast components, not the hook."}
{"id":"My-Prompt-Manager-79e","title":"Create analytics-clear-history.spec.ts E2E tests","description":"Create tests/e2e/analytics/analytics-clear-history.spec.ts. Test scenarios: modal opens on click, shows warning, cancel closes without clearing, backdrop closes modal, confirm removes all history, loading state, storage cleared, FAB hides after clear, button only visible with data.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:11.563191+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:50:30.97112+01:00","closed_at":"2026-01-16T14:50:30.97112+01:00","close_reason":"Created E2E test files with comprehensive test coverage","dependencies":[{"issue_id":"My-Prompt-Manager-79e","depends_on_id":"My-Prompt-Manager-6rp","type":"blocks","created_at":"2026-01-16T13:26:23.078351+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-79e","depends_on_id":"My-Prompt-Manager-1dn","type":"blocks","created_at":"2026-01-16T13:26:23.170129+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-79e","depends_on_id":"My-Prompt-Manager-d70","type":"blocks","created_at":"2026-01-16T13:26:23.261618+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-79e","depends_on_id":"My-Prompt-Manager-bpx","type":"blocks","created_at":"2026-01-16T13:26:23.350782+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-79e","depends_on_id":"My-Prompt-Manager-1lg","type":"blocks","created_at":"2026-01-16T13:26:23.437143+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-7be","title":"Move View Full Dashboard button to footer","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:51:25.365895+01:00","created_by":"spartDev","updated_at":"2026-01-13T14:43:10.699075+01:00","closed_at":"2026-01-13T14:43:10.699075+01:00","close_reason":"Closed","dependencies":[{"issue_id":"My-Prompt-Manager-7be","depends_on_id":"My-Prompt-Manager-0n5","type":"blocks","created_at":"2026-01-13T13:52:41.089325+01:00","created_by":"spartDev"}],"comments":[{"id":2,"issue_id":"My-Prompt-Manager-7be","author":"spartDev","text":"Add a footer section after main in AnalyticsTab.tsx similar to LibraryView:171-182. Move the View Full Dashboard button from header to footer with stats display. Show only when hasData and onExpandDashboard and context is sidepanel.","created_at":"2026-01-13T12:52:31Z"}]}
{"id":"My-Prompt-Manager-7m2","title":"Simplify FilterSortControls - remove Categories button","description":"Remove Categories button and onManageCategories prop from FilterSortControls. Component should only handle filtering and sorting, not navigation. Update memoization comparison function.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:54.872801+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:12:20.81385+01:00","closed_at":"2026-01-14T16:12:20.81385+01:00","close_reason":"Removed Categories button and onManageCategories prop from FilterSortControls. Updated type definitions, component usages in App.tsx and LibraryView.tsx, and removed related tests."}
{"id":"My-Prompt-Manager-7qa","title":"Convert ErrorType enum to string union","description":"ErrorType enum (index.ts:138-145) could be string union for better tree-shaking. Enums compile to objects at runtime while unions are erased.","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:48.122031+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:48.122031+01:00"}
{"id":"My-Prompt-Manager-7u4","title":"Add bottom padding to scrollable content for FAB clearance","description":"Add pb-16 (bottom padding) to the scrollable main content area to prevent content from being hidden behind the floating button","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T12:41:41.811429+01:00","created_by":"spartDev","updated_at":"2026-01-16T12:46:29.050989+01:00","closed_at":"2026-01-16T12:46:29.050989+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-81u","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"open","priority":2,"issue_type":"molecule","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:32.736073+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:32.736073+01:00"}
{"id":"My-Prompt-Manager-8jz","title":"Analytics page ignores user theme preference from settings","description":"## Bug Description\nAnalytics page (src/analytics.html) always shows dark mode when OS is in dark mode, even if user explicitly set Light mode in extension settings.\n\n## Root Cause\nThe `analytics.tsx` file has its own `useDarkMode` hook (lines 11-37) that only checks `prefers-color-scheme` media query. It does NOT read the user's theme preference from Chrome storage.\n\nMeanwhile, the main popup uses `ThemeProvider` → `useTheme` which:\n1. Reads user's theme preference from Chrome storage ('light', 'dark', or 'system')\n2. Respects user's explicit choice\n\n## Expected Behavior\nAnalytics page should respect the user's theme preference from extension settings, same as popup does.\n\n## Affected Files\n- src/analytics.tsx - Has its own useDarkMode that ignores storage settings\n- src/hooks/useTheme.ts - The correct implementation used by popup\n- src/contexts/ThemeContext.tsx - ThemeProvider used by popup","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-13T17:43:17.388333+01:00","created_by":"spartDev","updated_at":"2026-01-13T17:56:27.456648+01:00","closed_at":"2026-01-13T17:56:27.456648+01:00","close_reason":"Both dependencies complete - analytics now uses ThemeProvider and body has dark mode background","dependencies":[{"issue_id":"My-Prompt-Manager-8jz","depends_on_id":"My-Prompt-Manager-6k6","type":"blocks","created_at":"2026-01-13T17:43:40.893564+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-8jz","depends_on_id":"My-Prompt-Manager-m0l","type":"blocks","created_at":"2026-01-13T17:43:40.983382+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-8q8","title":"Consider adaptive HASH_BUCKET_SIZE for duplicate detection","description":"Currently HASH_BUCKET_SIZE is fixed at 100 characters. For prompt libraries with very short or very long prompts on average, an adaptive bucket size based on the collection's average prompt length could improve bucketing efficiency. This is a future optimization to consider.","status":"closed","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T17:51:18.637974+01:00","created_by":"spartDev","updated_at":"2026-01-20T18:05:17.355384+01:00","closed_at":"2026-01-20T18:05:17.355384+01:00","close_reason":"Implemented: 33 unit tests, JSDoc documentation, adaptive bucket range"}
{"id":"My-Prompt-Manager-9cr","title":"Optimize tab iteration in useTheme","description":"useTheme.ts:91-102 - Iterates ALL browser tabs to send theme change message.\n\n```typescript\nchrome.tabs.query({}, (tabs) =\u003e {\n  tabs.forEach((tab) =\u003e {  // ❌ forEach on potentially large array\n```\n\n**Consider:** \n- Using for...of for early exit capability\n- Limiting to active tabs\n- Using broadcast channel instead","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:40.444159+01:00","created_by":"spartDev","updated_at":"2026-01-21T14:52:52.081628+01:00","closed_at":"2026-01-21T14:52:52.081628+01:00","close_reason":"Optimized tab iteration: query only content script URLs, use for...of"}
{"id":"My-Prompt-Manager-9mf","title":"useTheme: Memoize resolvedTheme computation","description":"**Location**: useTheme.ts:86\n\n**Problem**: getSystemTheme() queries window.matchMedia on every render when theme is 'system'.\n\n**Current code**:\n```tsx\nconst resolvedTheme = theme === 'system' ? getSystemTheme() : theme;\n```\n\n**Fix**: Memoize the computation:\n```tsx\nconst resolvedTheme = useMemo(\n  () =\u003e theme === 'system' ? getSystemTheme() : theme,\n  [theme, getSystemTheme]\n);\n```","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T16:35:41.559766+01:00","created_by":"spartDev","updated_at":"2026-01-21T16:46:40.952701+01:00","closed_at":"2026-01-21T16:46:40.952701+01:00","close_reason":"Memoized resolvedTheme computation with useMemo to prevent unnecessary window.matchMedia queries on every render"}
{"id":"My-Prompt-Manager-akm","title":"Add lock to UsageTracker.clearHistory - race condition","description":"UsageTracker.ts:125-131 - Every other write operation uses withLock() except clearHistory(). This is a textbook race condition waiting to happen. Wrap it in withLock() like everything else.","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:33.999284+01:00","created_by":"spartDev","updated_at":"2026-01-20T16:00:59.926899+01:00","closed_at":"2026-01-20T16:00:59.926899+01:00","close_reason":"Fixed: all tests pass"}
{"id":"My-Prompt-Manager-ala","title":"Fix tooltip 'Uses' label color inconsistency in analytics charts","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-13T17:29:12.52092+01:00","created_by":"spartDev","updated_at":"2026-01-13T17:32:24.202161+01:00","closed_at":"2026-01-13T17:32:24.202161+01:00","close_reason":"Added itemStyle prop to Tooltip in PlatformPieChart, DayOfWeekChart, CategoryBarChart, and TimeOfDayChart to fix black 'Uses' label in dark mode","comments":[{"id":7,"issue_id":"My-Prompt-Manager-ala","author":"spartDev","text":"## Problem Analysis\n\nWhen hovering over charts in the analytics dashboard, the 'Uses' label in tooltips appears in black on the following charts:\n- PlatformPieChart (Pie chart)\n- DayOfWeekChart (Day of week bar chart)\n- CategoryBarChart (Categories horizontal bar chart)\n- TimeOfDayChart (Time of day bar chart)\n\nHowever, the UsageLineChart correctly styles the 'Uses' label with a colored itemStyle.\n\n## Root Cause\n\nThe Recharts Tooltip component has an itemStyle prop that controls the color of the value/label text. UsageLineChart uses this prop (line 104-106), but the other 4 charts don't have it, so the text defaults to black.\n\n## Fix Plan\n\nAdd itemStyle to each affected chart's Tooltip component to set the text color appropriately based on dark mode:\n- Light mode: use a dark text color (#111827 gray-900) \n- Dark mode: use a light text color (#f3f4f6 gray-100)\n\nFiles to update:\n1. src/components/analytics/charts/PlatformPieChart.tsx (line ~109-121)\n2. src/components/analytics/charts/DayOfWeekChart.tsx (line ~90-103)\n3. src/components/analytics/charts/CategoryBarChart.tsx (line ~116-129)\n4. src/components/analytics/charts/TimeOfDayChart.tsx (line ~109-122)","created_at":"2026-01-13T16:30:48Z"}]}
{"id":"My-Prompt-Manager-avh","title":"Consider i18n for stop words in search","description":"SearchIndex.ts:24-28 - English-only stop words means poor search relevance for non-English prompts. Future consideration: language detection or configurable stop word lists.","status":"closed","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:30:03.922075+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:18:18.014195+01:00","closed_at":"2026-01-20T22:18:18.014195+01:00","close_reason":"Not relevant"}
{"id":"My-Prompt-Manager-b1e","title":"Add safeguards to duplicate detection - O(n^2) with 5000 prompts","description":"promptManager.ts:404-474 - With 5000 prompts this does 12.5 million comparisons. The 30s timeout helps but is too generous. Add prompt count limit, consider content hashing for initial filter, yield to keep UI responsive.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:47.686966+01:00","created_by":"spartDev","updated_at":"2026-01-20T17:36:58.745833+01:00","closed_at":"2026-01-20T17:36:58.745833+01:00","close_reason":"Added safeguards: prompt count limit (1000), reduced timeout (10s), length bucket optimization, UI yield mechanism"}
{"id":"My-Prompt-Manager-bla","title":"Fix Top Platform display showing full hostname instead of subdomain","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-13T17:09:27.580943+01:00","created_by":"spartDev","updated_at":"2026-01-13T17:15:02.936671+01:00","closed_at":"2026-01-13T17:15:02.936671+01:00","close_reason":"Implemented shared formatPlatformName utility that extracts subdomain from hostnames and truncates long names with ellipsis","comments":[{"id":6,"issue_id":"My-Prompt-Manager-bla","author":"spartDev","text":"## Problem\nWhen the platform is not a known platform (like Claude, ChatGPT), the full hostname (e.g., concierge.sanofi.com) is displayed instead of just the subdomain (concierge). This breaks the UI when names are too long.\n\n## Root Cause\nThe formatPlatformName function (duplicated in 3 files) only maps known platforms and falls back to the raw hostname for unknown ones.\n\n## Solution\n1. Create a shared utility function in src/utils/formatPlatformName.ts that:\n   - Extracts the subdomain from hostnames (concierge.sanofi.com → concierge)\n   - Capitalizes the first letter for display\n   - Truncates long names (max 12 chars with ellipsis)\n\n2. Update formatPlatformName in 3 files:\n   - src/components/analytics/AnalyticsTab.tsx\n   - src/components/analytics/AnalyticsDashboard.tsx\n   - src/components/analytics/charts/PlatformPieChart.tsx\n\n3. Add tests for the new utility function","created_at":"2026-01-13T16:09:48Z"}]}
{"id":"My-Prompt-Manager-bo8","title":"Fix toast type inconsistency - missing 'warning' in ToastProps","description":"ToastProps.type is missing 'warning' variant (line 64 in components.ts) but other interfaces include it (lines 12, 46, 78). Create shared ToastType union type.","status":"open","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:38.370506+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:38.370506+01:00"}
{"id":"My-Prompt-Manager-bpx","title":"Add usage event helpers to storage.ts","description":"Add to tests/e2e/utils/storage.ts: UsageEvent interface, createUsageEventSeed, createUsageHistory (generates events across days), seedUsageHistory. Handle promptId, timestamp, platform, categoryId fields.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:07.97868+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:37:47.651931+01:00","closed_at":"2026-01-16T14:37:47.651931+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-br5","title":"Simplify long dependency array in useEnhancedFloatingPosition","description":"useEnhancedFloatingPosition.ts:149 - 10 dependencies causes frequent effect re-runs.\n\n```typescript\n[isOpen, referenceRef, floatingRef, placement, offsetValue, enableShift, enableFlip, maxHeight, shiftPadding, matchWidth]\n```\n\nAny change triggers cleanup/re-subscribe to autoUpdate.\n\n**Consider:** Using refs for stable values or accepting options as single memoized object.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:50.472207+01:00","created_by":"spartDev","updated_at":"2026-01-21T16:46:50.349097+01:00","closed_at":"2026-01-21T16:46:50.349097+01:00","close_reason":"Reduced dependency array from 10 to 3 by storing options in a ref. The autoUpdate callback now reads latest options from the ref on each frame."}
{"id":"My-Prompt-Manager-by0","title":"Create analytics-dashboard.spec.ts E2E tests","description":"Create tests/e2e/analytics/analytics-dashboard.spec.ts. Test scenarios: renders dashboard with all sections, empty state, charts render (usage trend, platform pie, day of week), tabs (Most Used default, Recently Used, Forgotten), back navigation.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:10.667396+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:50:30.993756+01:00","closed_at":"2026-01-16T14:50:30.993756+01:00","close_reason":"Created E2E test files with comprehensive test coverage","dependencies":[{"issue_id":"My-Prompt-Manager-by0","depends_on_id":"My-Prompt-Manager-6rp","type":"blocks","created_at":"2026-01-16T13:26:21.839052+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-by0","depends_on_id":"My-Prompt-Manager-1dn","type":"blocks","created_at":"2026-01-16T13:26:21.927237+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-by0","depends_on_id":"My-Prompt-Manager-d70","type":"blocks","created_at":"2026-01-16T13:26:22.015115+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-by0","depends_on_id":"My-Prompt-Manager-bpx","type":"blocks","created_at":"2026-01-16T13:26:22.102441+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-by0","depends_on_id":"My-Prompt-Manager-1lg","type":"blocks","created_at":"2026-01-16T13:26:22.185846+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-ck7","title":"useTheme: Refactor fire-and-forget async in setTheme","description":"**Location**: useTheme.ts:108-129\n\n**Problem**: Nested IIFE with void is harder to follow. If setTheme is called rapidly, multiple async operations run concurrently.\n\n**Current code**:\n```tsx\nvoid (async () =\u003e {\n  // ... queries tabs and sends messages\n})();\n```\n\n**Suggestion**: Consider debouncing or extracting to a separate function for clarity and to prevent concurrent execution on rapid calls.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T16:35:43.337946+01:00","created_by":"spartDev","updated_at":"2026-01-21T17:01:47.511419+01:00","closed_at":"2026-01-21T17:01:47.511419+01:00","close_reason":"Refactored fire-and-forget async to extracted notifyContentScriptsOfThemeChange function"}
{"id":"My-Prompt-Manager-cok","title":"Wire up onExpandDashboard to open full-page analytics","description":"Wire up the onExpandDashboard callback in AnalyticsTab to open the full-page analytics dashboard in a new browser tab.\n\n## Changes Required\n\n### App.tsx\nWhen rendering AnalyticsTab, pass onExpandDashboard callback that:\n1. Gets the extension URL using chrome.runtime.getURL('src/analytics.html')\n2. Opens a new tab with chrome.tabs.create({ url })\n3. Optionally closes the popup/sidepanel after opening (UX decision)\n\n## Implementation\n\\`\\`\\`typescript\nconst handleExpandDashboard = useCallback(() =\u003e {\n  const url = chrome.runtime.getURL('src/analytics.html');\n  void chrome.tabs.create({ url });\n}, []);\n\\`\\`\\`\n\n## Edge Cases\n- Handle case where chrome.tabs API is not available (popup context)\n- Consider using chrome.windows.create as fallback\n- Handle errors gracefully with toast notification\n\n## Acceptance Criteria\n- [ ] \"View Full Dashboard\" button in AnalyticsTab opens analytics.html in new tab\n- [ ] Works in both popup and sidepanel contexts\n- [ ] No console errors when clicking the button\n- [ ] Analytics page loads correctly with dark mode matching system preference\n- [ ] User can navigate back to extension after viewing dashboard","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:03:21.884677+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:26:53.750649+01:00","closed_at":"2026-01-13T13:26:53.750651+01:00","dependencies":[{"issue_id":"My-Prompt-Manager-cok","depends_on_id":"My-Prompt-Manager-xbk","type":"blocks","created_at":"2026-01-13T13:03:39.284243+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-cok","depends_on_id":"My-Prompt-Manager-iib","type":"blocks","created_at":"2026-01-13T13:03:47.23215+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-d70","title":"Add analyticsWorkflows to workflows.ts","description":"Add analyticsWorkflows object to tests/e2e/utils/workflows.ts. Include: navigateToAnalyticsTab, navigateToFullDashboard, clearHistory, cancelClearHistory, switchTab, verifyAnalyticsSummary, openAnalyticsDashboard. Follow existing workflow pattern.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T13:26:07.063811+01:00","created_by":"spartDev","updated_at":"2026-01-16T14:37:47.629958+01:00","closed_at":"2026-01-16T14:37:47.629958+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-dcu","title":"Usage Analytics Dashboard","description":"30-day rolling analytics dashboard showing prompt usage patterns across time, platforms, and categories. Includes compact tab view with summary cards and full-page dashboard with Recharts visualizations. Design doc: docs/plans/2026-01-12-usage-analytics-dashboard-design.md","status":"closed","priority":2,"issue_type":"epic","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:58:30.21399+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:51:59.673857+01:00","closed_at":"2026-01-13T12:51:59.673857+01:00","close_reason":"All 8 tasks completed. UsageTracker records events, useUsageStats aggregates data, AnalyticsTab and AnalyticsDashboard display metrics with charts, clear history modal implemented, comprehensive test coverage."}
{"id":"My-Prompt-Manager-dcu.1","title":"UsageTracker service + storage integration","description":"Create UsageTracker singleton service with methods: record(), getHistory(), clearHistory(), cleanup(). Store UsageEvent objects in Chrome local storage under 'usageHistory' key. Include 30-day retention cleanup on init.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:07.179476+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:02:47.447238+01:00","closed_at":"2026-01-13T12:02:47.447238+01:00","close_reason":"Implemented UsageTracker singleton service with record/getHistory/clearHistory/cleanup methods, mutex for race conditions, 30-day retention, and comprehensive unit tests (24 tests)","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.1","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:07.180409+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.2","title":"useUsageStats hook with aggregation logic","description":"Create React hook that queries UsageTracker and aggregates data into chart-ready structures: dailyUsage, platformBreakdown, dayOfWeekDistribution, timeOfDayDistribution, categoryDistribution, topPrompts, recentPrompts, forgottenPrompts.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:08.208471+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:10:40.937901+01:00","closed_at":"2026-01-13T12:10:40.937901+01:00","close_reason":"Implemented useUsageStats hook with comprehensive aggregation logic for daily usage, platform breakdown, day of week distribution, time of day distribution, category distribution, top/recent/forgotten prompts. 28 unit tests.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.2","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:08.209449+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.2","depends_on_id":"My-Prompt-Manager-dcu.1","type":"blocks","created_at":"2026-01-12T22:59:30.552486+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.3","title":"AnalyticsTab with summary cards","description":"Create compact Analytics tab view for popup/side panel. Include 2x2 grid of SummaryCard components showing: total uses, top platform, peak day, top category. Add top 5 prompts list and expand button.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:09.215633+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:20:05.867692+01:00","closed_at":"2026-01-13T12:20:05.867692+01:00","close_reason":"Created SummaryCard and AnalyticsTab components with 2x2 grid of summary cards (total uses, top platform, peak day, top category), top 5 prompts list, expand button, loading/error/empty states, and 57 tests","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.3","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:09.216487+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.3","depends_on_id":"My-Prompt-Manager-dcu.2","type":"blocks","created_at":"2026-01-12T22:59:34.279383+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.4","title":"Install Recharts + build chart components","description":"Add Recharts dependency (~40KB). Create chart components: UsageLineChart (30-day trend), PlatformPieChart (donut), DayOfWeekChart (vertical bar), CategoryBarChart (horizontal bar), TimeOfDayChart (buckets).","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:10.28256+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:26:01.973889+01:00","closed_at":"2026-01-13T12:26:01.973889+01:00","close_reason":"Installed Recharts (~37 packages). Created 5 chart components: UsageLineChart (30-day line chart), PlatformPieChart (donut), DayOfWeekChart (vertical bars), CategoryBarChart (horizontal bars), TimeOfDayChart (buckets). All with dark mode support and 27 tests.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.4","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:10.283313+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.4","depends_on_id":"My-Prompt-Manager-dcu.2","type":"blocks","created_at":"2026-01-12T22:59:35.27725+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.5","title":"Full-page dashboard layout","description":"Create analytics.tsx page entry point and AnalyticsDashboard container. Layout: header with back button, line chart row, 2x2 chart grid (platform pie, day-of-week bar, category bar, time-of-day), prompt tables with tabs (Most Used, Recently Used, Forgotten).","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:11.2908+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:32:32.752144+01:00","closed_at":"2026-01-13T12:32:32.752144+01:00","close_reason":"Created analytics.html, analytics.tsx, and AnalyticsDashboard.tsx. Layout includes: header with back button, summary cards (4-col grid), usage trend line chart, 2x2 chart grid (platforms, day-of-week, categories, time-of-day), and tabbed prompt tables (Most Used, Recently Used, Forgotten). All verification passes.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:11.291592+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu.3","type":"blocks","created_at":"2026-01-12T22:59:36.340492+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.5","depends_on_id":"My-Prompt-Manager-dcu.4","type":"blocks","created_at":"2026-01-12T22:59:37.370128+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.6","title":"Integration: wire up recording in PromptLibraryInjector","description":"Call UsageTracker.getInstance().record() when prompt is inserted into AI platform. Pass promptId, platform identifier, and categoryId. Update manifest.json if needed for analytics page.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:12.324072+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:40:44.922285+01:00","closed_at":"2026-01-13T12:40:44.922285+01:00","close_reason":"Wired up UsageTracker.record() in background script when PROMPT_USAGE_INCREMENT message received. Content script now passes platform name and categoryId.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.6","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:12.324895+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.6","depends_on_id":"My-Prompt-Manager-dcu.1","type":"blocks","created_at":"2026-01-12T22:59:38.523731+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.7","title":"Polish: dark mode, empty states, loading states","description":"Ensure all analytics components respect dark mode via Tailwind theme. Add empty state UI when no usage data exists. Add loading skeletons while data loads. Add clear history confirmation modal.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:13.337959+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:47:06.76529+01:00","closed_at":"2026-01-13T12:47:06.76529+01:00","close_reason":"Added clear history confirmation modal with proper dark mode and accessibility support. All analytics components now have dark mode, empty states, and loading skeletons.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.7","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:13.338764+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.7","depends_on_id":"My-Prompt-Manager-dcu.5","type":"blocks","created_at":"2026-01-12T22:59:39.54575+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-dcu.8","title":"Testing: unit, component, E2E","description":"Unit tests for UsageTracker (record, getHistory, cleanup, clearHistory, date boundaries). Component tests for AnalyticsTab, charts, PromptTable (sorting, tabs, dark mode). E2E tests for record usage flow, clear history, full page navigation.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:59:14.348393+01:00","created_by":"spartDev","updated_at":"2026-01-13T12:51:43.959198+01:00","closed_at":"2026-01-13T12:51:43.959198+01:00","close_reason":"Added 8 new clear history tests for AnalyticsTab. UsageTracker has 24 comprehensive unit tests. useUsageStats has full test coverage. Chart components have tests. E2E tests can be added when extension is running in browser context.","dependencies":[{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu","type":"parent-child","created_at":"2026-01-12T22:59:14.34929+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu.6","type":"blocks","created_at":"2026-01-12T22:59:40.617856+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-dcu.8","depends_on_id":"My-Prompt-Manager-dcu.7","type":"blocks","created_at":"2026-01-12T22:59:41.614359+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-djh","title":"Fix falsy value edge case in storage.ts","description":"storage.ts:706 - 'return (result[key] as T) || null' returns null for 0, empty string, or false. Use explicit undefined check instead. Low risk currently but bad pattern.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:30:02.913778+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:16:36.548741+01:00","closed_at":"2026-01-20T22:16:36.548741+01:00","close_reason":"Already completed in commit f9ec6ae"}
{"id":"My-Prompt-Manager-djt","title":"Consolidate or remove unused SELECTORS module","description":"## Problem\n`tests/e2e/utils/selectors.ts` defines a `SELECTORS` object with CSS-based selectors, but tests primarily use inline role-based locators. This creates two inconsistent selector systems.\n\n## Current State\n**selectors.ts defines:**\n```typescript\nSELECTORS = {\n  headings: { promptManager: 'heading[name=\"My Prompt Manager\"]' },\n  buttons: { addNewPrompt: 'button[name=\"Add new prompt\"]' },\n  // ... 90+ selectors\n}\n```\n\n**But tests use:**\n```typescript\npage.getByRole('button', { name: 'Add new prompt' })  // Not using SELECTORS\npage.getByRole('heading', { name: 'My Prompt Manager' })\n```\n\n## Options\n\n### Option A: Remove SELECTORS module (Recommended)\n- Delete `selectors.ts`\n- Standardize on inline role-based locators\n- Simpler, follows Playwright best practices\n\n### Option B: Update SELECTORS to use createSelectors pattern\n- Refactor `createSelectors(page)` to return role-based locators\n- Update all tests to use centralized selectors\n- More complex but provides single source of truth\n\n## Acceptance Criteria\n- [ ] Decision made: remove or refactor SELECTORS module\n- [ ] No mixed selector strategies in codebase\n- [ ] If removed: all inline locators use role-based strategy\n- [ ] If refactored: all tests use centralized selectors\n- [ ] All E2E tests pass","acceptance_criteria":"## Acceptance Criteria\n- [ ] Decision made: remove or refactor SELECTORS module\n- [ ] No mixed selector strategies in codebase\n- [ ] If removed: all inline locators use role-based strategy\n- [ ] If refactored: all tests use centralized selectors\n- [ ] All E2E tests pass","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:51.906155+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:16:36.553497+01:00","closed_at":"2026-01-20T22:16:36.553497+01:00","close_reason":"Already completed in commit f9ec6ae"}
{"id":"My-Prompt-Manager-egu","title":"Integrate FooterToolbar in LibraryView","description":"Replace current footer in LibraryView with FooterToolbar component. Wire up navigation callbacks (onAnalytics, onCategories, onSettings) and pass prompt counts. Handle loading state.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:56.798963+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:25:46.139671+01:00","closed_at":"2026-01-14T16:25:46.139671+01:00","close_reason":"Integrated FooterToolbar in LibraryView with navigation callbacks and prompt counts","dependencies":[{"issue_id":"My-Prompt-Manager-egu","depends_on_id":"My-Prompt-Manager-vaf","type":"blocks","created_at":"2026-01-13T22:45:11.311774+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-egu","depends_on_id":"My-Prompt-Manager-7m2","type":"blocks","created_at":"2026-01-13T22:45:11.407146+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-ejk","title":"useTheme: Replace type assertion with type guard","description":"**Location**: useTheme.ts:36\n\n**Problem**: The includes check on line 35 validates the value, but TypeScript doesn't narrow. Uses type assertion instead of type guard.\n\n**Current code**:\n```tsx\nif (localStorageTheme \u0026\u0026 ['light', 'dark', 'system'].includes(localStorageTheme)) {\n  const migratedTheme = localStorageTheme as Theme;\n```\n\n**Suggestion**: Create a type guard for clarity:\n```tsx\nconst isTheme = (value: string): value is Theme =\u003e \n  ['light', 'dark', 'system'].includes(value);\n\nif (localStorageTheme \u0026\u0026 isTheme(localStorageTheme)) {\n  // localStorageTheme is now narrowed to Theme\n}\n```","status":"closed","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T16:35:44.237246+01:00","created_by":"spartDev","updated_at":"2026-01-21T17:01:14.616686+01:00","closed_at":"2026-01-21T17:01:14.616686+01:00","close_reason":"Replaced type assertion with type guard"}
{"id":"My-Prompt-Manager-eul","title":"Ensure parent container has relative positioning","description":"Verify the main wrapper div has 'relative' class for absolute positioning of the FAB to work correctly","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T12:41:40.911594+01:00","created_by":"spartDev","updated_at":"2026-01-16T12:46:29.031256+01:00","closed_at":"2026-01-16T12:46:29.031256+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-f8t","title":"Fix inconsistent dependency arrays in useCategories vs usePrompts","description":"useCategories.ts includes singleton in deps array while usePrompts correctly omits it with explanation.\n\n- usePrompts.ts:27 - Omits singleton from deps (with eslint-disable and comment)\n- useCategories.ts:27 - Includes storageManager in deps\n\n**Fix:** Make useCategories consistent with usePrompts pattern - omit singletons from deps with explanation.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:38.409838+01:00","created_by":"spartDev","updated_at":"2026-01-21T14:52:19.888002+01:00","closed_at":"2026-01-21T14:52:19.888002+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-g5v","title":"Extract shared ViewType for currentView","description":"View type 'library' | 'add' | 'edit' is duplicated in AppState (index.ts:129), AppContextType (context.ts:9,17). Extract to shared ViewType.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:46.16702+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:46.16702+01:00"}
{"id":"My-Prompt-Manager-gpy","title":"Remove or implement no-op clearSearch in useSearch","description":"useSearch.ts:39-41 - clearSearch callback does nothing.\n\n```typescript\nconst clearSearch = useCallback(() =\u003e {\n  // This will be handled by the parent component\n}, []);\n```\n\nConfusing API - either implement the functionality or remove it from the return value.","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:25.102014+01:00","created_by":"spartDev","updated_at":"2026-01-21T14:47:24.415129+01:00","closed_at":"2026-01-21T14:47:24.415129+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-gqm","title":"Replace legacy unknown fields in CustomSite with proper types","description":"CustomSite.positioning has legacy fields anchorId and signature typed as unknown (index.ts:78-79). Either properly type them or mark as deprecated with @deprecated JSDoc.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:47.143626+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:47.143626+01:00"}
{"id":"My-Prompt-Manager-h9e","title":"Add type validation to storage loadData method","description":"UseStorageReturn.loadData\u003cT\u003e (hooks.ts:50) returns Promise\u003cT | null\u003e but caller can request any type without runtime validation. Consider adding Zod schema validation or type guard parameter.","status":"open","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:50.056308+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:50.056308+01:00"}
{"id":"My-Prompt-Manager-ics","title":"Fix memory leak in useClipboard - setTimeout not cleaned up","description":"useClipboard.ts:46-48, 55-58 - setTimeout calls are NOT cleaned up on unmount. If component unmounts before timeout fires, it attempts setState on unmounted component.\n\n**Current code:**\n```typescript\nsetTimeout(() =\u003e {\n  setCopyStatus('idle');\n}, 2000);\n```\n\n**Fix:** Store timeout ID in ref and clear on cleanup.","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:18.705632+01:00","created_by":"spartDev","updated_at":"2026-01-21T14:47:24.411956+01:00","closed_at":"2026-01-21T14:47:24.411956+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-iib","title":"Add analytics view type to App.tsx","description":"Add 'analytics' to the ViewType union in App.tsx and render AnalyticsTab when this view is active.\n\n## Changes Required\n- Add 'analytics' to ViewType: `type ViewType = 'library' | 'add' | 'edit' | 'categories' | 'settings' | 'analytics'`\n- Import AnalyticsTab from './components/analytics'\n- Add conditional render for analytics view\n- Wire up onExpandDashboard callback to open chrome.tabs.create() with analytics.html\n- Wire up back navigation to return to library view\n\n## Acceptance Criteria\n- [ ] ViewType includes 'analytics'\n- [ ] AnalyticsTab renders when currentView === 'analytics'\n- [ ] \"View Full Dashboard\" button opens analytics.html in new tab\n- [ ] Back button returns to library view\n- [ ] Dark mode works correctly in analytics view\n- [ ] TypeScript compiles without errors","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:02:41.519919+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:09:02.792137+01:00","closed_at":"2026-01-13T13:09:02.792137+01:00","close_reason":"Implemented analytics view integration in App.tsx: added 'analytics' to ViewType, imported AnalyticsTab, added handleExpandDashboard callback with chrome.tabs.create, added conditional render. Also added onBack prop to AnalyticsTab with back button in header.","dependencies":[{"issue_id":"My-Prompt-Manager-iib","depends_on_id":"My-Prompt-Manager-xbk","type":"blocks","created_at":"2026-01-13T13:03:39.099658+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-j32","title":"Fix prompt size validation: prompts under 10K chars incorrectly rejected","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-12T16:40:14.901861+01:00","created_by":"spartDev","updated_at":"2026-01-12T16:40:34.569141+01:00","closed_at":"2026-01-12T16:40:34.569141+01:00","close_reason":"Fixed: Increased MAX_PROMPT_SIZE from 10KB to 50KB to accommodate 20K character limit (20K chars × 2 bytes/char + overhead). Also added size validation to updatePrompt for consistency."}
{"id":"My-Prompt-Manager-l5p","title":"Fix lastUsedAt semantic - don't set on new prompts","description":"storage.ts:113 - Setting lastUsedAt on a prompt with usageCount:0 is semantically wrong. Set to undefined or let normalizePrompt handle it.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:30:00.853313+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:16:36.546523+01:00","closed_at":"2026-01-20T22:16:36.546523+01:00","close_reason":"Already completed in commit f9ec6ae"}
{"id":"My-Prompt-Manager-lrp","title":"Update existing component tests","description":"Update tests in FilterSortControls.test.tsx (remove Categories), LibraryView.test.tsx (new footer), ViewHeader.test.tsx (no Analytics/Settings in library). Ensure no test regressions.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:59.723823+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:47:33.761521+01:00","closed_at":"2026-01-14T16:47:33.761521+01:00","close_reason":"All test updates verified: FilterSortControls tests updated (removed Manage Categories button tests), LibraryView tests work with new FooterToolbar, ViewHeader tests remain valid for component API. All 1711 tests pass, lint clean, typecheck clean.","dependencies":[{"issue_id":"My-Prompt-Manager-lrp","depends_on_id":"My-Prompt-Manager-7m2","type":"blocks","created_at":"2026-01-13T22:45:12.75031+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-lrp","depends_on_id":"My-Prompt-Manager-666","type":"blocks","created_at":"2026-01-13T22:45:12.842311+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-m0l","title":"Add dark mode support to body background in popup.css","description":"## Task\nThe popup.css file has hardcoded `background: #ffffff` on body (line 39), which doesn't change for dark mode.\n\n## Changes Required\nAdd dark mode variant for body background. Two options:\n1. Use Tailwind's @apply with dark: variant\n2. Add a .dark body { background: \u003cdark-color\u003e; } rule\n\n## Affected Files\n- src/popup.css\n\n## Acceptance Criteria\n- Body background changes appropriately in dark mode\n- No flash of white when loading in dark mode","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T17:43:33.557821+01:00","created_by":"spartDev","updated_at":"2026-01-13T17:56:27.431349+01:00","closed_at":"2026-01-13T17:56:27.431349+01:00","close_reason":"Both dependencies complete - analytics now uses ThemeProvider and body has dark mode background"}
{"id":"My-Prompt-Manager-m2b","title":"Add Analytics button to ViewHeader","description":"Add an AnalyticsButton subcomponent to ViewHeader and use it in LibraryView to navigate to the analytics view.\n\n## Changes Required\n\n### ViewHeader.tsx\n- Add 'analytics' to IconType union\n- Add AnalyticsIcon to HeaderIcons.tsx (bar chart icon)\n- Create AnalyticsButton subcomponent similar to SettingsButton\n- Export AnalyticsButton as ViewHeader.AnalyticsButton\n\n### LibraryView.tsx\n- Add onAnalytics prop to LibraryViewProps\n- Add ViewHeader.AnalyticsButton in ViewHeader.Actions (before SettingsButton)\n\n### App.tsx\n- Create handleAnalytics callback that sets currentView to 'analytics'\n- Pass onAnalytics to LibraryView\n\n## Button Design\n- Icon: Bar chart or line chart (consistent with analytics theme)\n- Position: Next to settings button in header\n- Hover state: Same as settings button\n- Accessibility: aria-label=\"View analytics\"\n\n## Acceptance Criteria\n- [ ] AnalyticsButton renders in ViewHeader with chart icon\n- [ ] Clicking button navigates to analytics view\n- [ ] Button has proper hover/focus states\n- [ ] Button has accessible aria-label\n- [ ] Dark mode support\n- [ ] Tests pass for ViewHeader and LibraryView","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:03:10.503034+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:18:32.708851+01:00","closed_at":"2026-01-13T13:18:32.708851+01:00","close_reason":"Added AnalyticsButton to ViewHeader and wired up navigation from LibraryView to analytics view","dependencies":[{"issue_id":"My-Prompt-Manager-m2b","depends_on_id":"My-Prompt-Manager-xbk","type":"blocks","created_at":"2026-01-13T13:03:39.189064+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-m2b","depends_on_id":"My-Prompt-Manager-iib","type":"blocks","created_at":"2026-01-13T13:03:47.142551+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-mbh","title":"Add generic type parameter to useStorage.saveData","description":"UseStorageReturn.saveData (hooks.ts:49) uses 'unknown' which loses type safety. Should be generic: saveData\u003cT\u003e(key: string, data: T): Promise\u003cvoid\u003e","status":"open","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:44.185506+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:44.185506+01:00"}
{"id":"My-Prompt-Manager-mq5","title":"Remove existing footer from AnalyticsTab","description":"Delete the footer section (lines 318-332) in AnalyticsTab.tsx that contains the View Full Dashboard button and usage count text","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T12:41:39.085156+01:00","created_by":"spartDev","updated_at":"2026-01-16T12:46:28.98948+01:00","closed_at":"2026-01-16T12:46:28.98948+01:00","close_reason":"Closed"}
{"id":"My-Prompt-Manager-my_prompt_manager-crew-neo","title":"Crew worker neo in my_prompt_manager - human-managed persistent workspace.","description":"Crew worker neo in my_prompt_manager - human-managed persistent workspace.\n\nrole_type: crew\nrig: my_prompt_manager\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:35:00.765709+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:35:00.942959+01:00","labels":["gt:agent"]}
{"id":"My-Prompt-Manager-my_prompt_manager-refinery","title":"Refinery for my_prompt_manager - processes merge queue.","description":"Refinery for my_prompt_manager - processes merge queue.\n\nrole_type: refinery\nrig: my_prompt_manager\nagent_state: idle\nhook_bead: null\nrole_bead: hq-refinery-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:32.035467+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:32.221374+01:00","labels":["gt:agent"]}
{"id":"My-Prompt-Manager-my_prompt_manager-witness","title":"Witness for my_prompt_manager - monitors polecat health and progress.","description":"Witness for my_prompt_manager - monitors polecat health and progress.\n\nrole_type: witness\nrig: my_prompt_manager\nagent_state: idle\nhook_bead: null\nrole_bead: hq-witness-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:31.507283+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:31.691515+01:00","labels":["gt:agent"]}
{"id":"My-Prompt-Manager-n96","title":"Fix View Full Dashboard link URL path","status":"closed","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:51:27.289405+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:58:54.827034+01:00","closed_at":"2026-01-13T13:58:54.827034+01:00","close_reason":"Fixed URL path from 'analytics.html' to 'src/analytics.html'","comments":[{"id":4,"issue_id":"My-Prompt-Manager-n96","author":"spartDev","text":"BUG: In App.tsx line 241, the URL analytics.html is wrong. The actual build output is at src/analytics.html. Change chrome.runtime.getURL to use src/analytics.html.","created_at":"2026-01-13T12:52:32Z"}]}
{"id":"My-Prompt-Manager-q36","title":"Document onClose stability requirement in useDropdownClose","description":"useDropdownClose.ts:98 - Effect dependencies include onClose callback.\n\nIf parent doesn't memoize onClose, effect re-runs on every render.\n\n**Fix:** Add JSDoc noting that onClose should be stable (wrapped in useCallback) or use useLatest pattern internally.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:51.511462+01:00","created_by":"spartDev","updated_at":"2026-01-21T17:01:13.764619+01:00","closed_at":"2026-01-21T17:01:13.764619+01:00","close_reason":"Added JSDoc documenting that onClose should be memoized with useCallback, and updated example to demonstrate proper usage"}
{"id":"My-Prompt-Manager-qal","title":"Final verification - footer toolbar redesign","description":"Run full verification: npm test, npm run lint, npm run typecheck. Manual testing in Chrome extension for popup and sidepanel contexts. Verify dark mode and accessibility.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:45:00.697371+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:54:57.452459+01:00","closed_at":"2026-01-14T16:54:57.452459+01:00","close_reason":"All automated checks passed (1711 tests, 0 lint errors, typecheck clean). Manual testing confirmed: popup, sidepanel, dark mode, and accessibility all working correctly.","dependencies":[{"issue_id":"My-Prompt-Manager-qal","depends_on_id":"My-Prompt-Manager-36x","type":"blocks","created_at":"2026-01-13T22:45:13.809997+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-qal","depends_on_id":"My-Prompt-Manager-lrp","type":"blocks","created_at":"2026-01-13T22:45:13.90146+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-r0j","title":"Fix bucket range calculation for 90% similarity boundary","description":"The bucket range uses 0.11 * len but the upper bound for 90% similarity is len / 0.9 = len * 1.1111. This can miss valid duplicates for long prompts at exact boundary (e.g., 9090-char and 10100-char prompts are 90% similar but fall 11 buckets apart, while we only check 10).\n\nFix: Use len / 9 instead of len * 0.11 for mathematically correct calculation.","status":"closed","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-20T20:08:44.908809+01:00","created_by":"spartDev","updated_at":"2026-01-20T20:10:28.946122+01:00","closed_at":"2026-01-20T20:10:28.946122+01:00","close_reason":"Fixed: use len/9 instead of len*0.11 for exact 90% similarity bound"}
{"id":"My-Prompt-Manager-r84","title":"Document prefix scan performance characteristics","description":"SearchIndex.ts:211-223 - O(vocabulary) per term. Currently acceptable (\u003c2ms) but should note that a trie would be needed if vocabulary grows significantly. Not urgent - just future-proofing documentation.","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:48.697235+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:16:36.542615+01:00","closed_at":"2026-01-20T22:16:36.542615+01:00","close_reason":"Already completed in commit f9ec6ae"}
{"id":"My-Prompt-Manager-rig-my_prompt_manager","title":"my_prompt_manager","description":"Rig identity bead for my_prompt_manager.\n\nrepo: https://github.com/spartDev/My-Prompt-Manager.git\nprefix: My-Prompt-Manager\nstate: active","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:33.207312+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:33.207312+01:00","labels":["gt:rig"]}
{"id":"My-Prompt-Manager-rjw","title":"Fix analytics platform tracking: use hostname lookup instead of active strategy","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-13T15:04:52.290703+01:00","created_by":"spartDev","updated_at":"2026-01-13T15:13:08.280828+01:00","closed_at":"2026-01-13T15:13:08.280828+01:00","close_reason":"Fixed analytics to use hostname lookup via getPlatformByHostname() instead of activeStrategy.name","comments":[{"id":5,"issue_id":"My-Prompt-Manager-rjw","author":"spartDev","text":"## Problem\n\nWhen tracking prompt usage analytics, the platform name is recorded as 'default' even when the user is on ChatGPT, Claude, or other supported platforms.\n\n## Root Cause\n\nIn src/content/core/injector.ts:1949, the platform name is derived from the active strategy. When DefaultStrategy handles the insertion (it always returns true from canHandle() as fallback), its name 'default' is recorded.\n\n## Fix\n\nUse getPlatformByHostname() to get the platform ID based on the URL hostname instead of relying on which strategy performed the insertion.\n\n## Files to Modify\n\n- src/content/core/injector.ts - Update usage tracking to use hostname-based platform identification","created_at":"2026-01-13T14:05:24Z"}]}
{"id":"My-Prompt-Manager-sj5","title":"Fix unsafe assignment lint error in tests/e2e/utils/index.ts:43","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-12T22:33:04.88157+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:38:57.649716+01:00","closed_at":"2026-01-12T22:38:57.649716+01:00","close_reason":"Removed reference to non-existent SELECTORS export from E2EUtils.Selectors"}
{"id":"My-Prompt-Manager-snj","title":"Optimize useSort to avoid potential double-render","description":"useSort.ts:40-43 - Two separate setState calls could cause double render (though React batches in event handlers).\n\n```typescript\nconst handleSortChange = useCallback((order, direction) =\u003e {\n  setSortOrder(order);      // First render\n  setSortDirection(direction); // Second render\n}, []);\n```\n\n**Fix:** Use single state object or reducer for atomic updates.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:39.434611+01:00","created_by":"spartDev","updated_at":"2026-01-21T14:52:35.837689+01:00","closed_at":"2026-01-21T14:52:35.837689+01:00","close_reason":"Refactored useSort to use single state object for atomic updates, eliminating potential double-render issue"}
{"id":"My-Prompt-Manager-tqa","title":"Update AnalyticsTab tests for new FAB button","description":"Update tests in AnalyticsTab.test.tsx for the new FAB button text ('Full Dashboard' instead of 'View Full Dashboard') and verify button visibility","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-16T12:41:42.693986+01:00","created_by":"spartDev","updated_at":"2026-01-16T16:18:01.968022+01:00","closed_at":"2026-01-16T16:18:01.968022+01:00","close_reason":"Updated FAB button text from 'View Full Dashboard' to 'Full Dashboard' in both component and tests","dependencies":[{"issue_id":"My-Prompt-Manager-tqa","depends_on_id":"My-Prompt-Manager-1f5","type":"blocks","created_at":"2026-01-16T12:42:13.713103+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-uwl","title":"useTheme: Memoize return value to prevent context consumer re-renders","description":"**Location**: useTheme.ts:168-173\n\n**Problem**: Every render creates a new object reference, causing all ThemeContext consumers to re-render even when values haven't changed.\n\n**Current code**:\n```tsx\nreturn {\n  theme,\n  resolvedTheme,\n  setTheme,\n  toggleTheme\n};\n```\n\n**Fix**: Wrap return value in useMemo:\n```tsx\nreturn useMemo(() =\u003e ({\n  theme,\n  resolvedTheme,\n  setTheme,\n  toggleTheme\n}), [theme, resolvedTheme, setTheme, toggleTheme]);\n```\n\n**Vercel Rule**: rerender-memo - memoize values passed to context providers.","status":"closed","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T16:35:40.640633+01:00","created_by":"spartDev","updated_at":"2026-01-21T16:45:09.187771+01:00","closed_at":"2026-01-21T16:45:09.187771+01:00","close_reason":"Memoized useTheme return value using useMemo to prevent unnecessary context consumer re-renders"}
{"id":"My-Prompt-Manager-uwt","title":"useTheme: Stabilize storage change listener dependency","description":"**Location**: useTheme.ts:56-79\n\n**Problem**: Storage change listener is recreated every time theme changes due to [theme] dependency. This adds/removes listeners unnecessarily.\n\n**Current code**:\n```tsx\n}, [theme]);\n```\n\n**Fix**: Use a ref to access current theme in the callback:\n```tsx\nconst themeRef = useRef(theme);\nthemeRef.current = theme;\n\nuseEffect(() =\u003e {\n  // ... listener uses themeRef.current instead of theme\n}, []); // stable dependency\n```\n\n**Vercel Rule**: rerender-dependencies - use primitive/stable dependencies.","status":"closed","priority":2,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-21T16:35:42.444567+01:00","created_by":"spartDev","updated_at":"2026-01-21T16:47:10.880412+01:00","closed_at":"2026-01-21T16:47:10.880412+01:00","close_reason":"Fixed by using themeRef and effect to update it, removing unstable [theme] dependency from storage and media query listener effects"}
{"id":"My-Prompt-Manager-ux6","title":"Simplify MockMediaQueryList type definition","description":"MockMediaQueryList (test-helpers.ts:109) uses verbose ReturnType\u003ctypeof import('vitest').vi.fn\u003e. Simplify to use Mock type already imported.","status":"open","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:52.957741+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:52.957741+01:00"}
{"id":"My-Prompt-Manager-v5r","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"open","priority":2,"issue_type":"molecule","owner":"roux.tom@gmail.com","created_at":"2026-01-18T22:34:32.997831+01:00","created_by":"spartDev","updated_at":"2026-01-18T22:34:32.997831+01:00"}
{"id":"My-Prompt-Manager-v5w","title":"Add tests for Analytics view integration","description":"Add unit and component tests for the analytics view integration in App.tsx, ViewHeader, and LibraryView.\n\n## Test Cases\n\n### App.tsx Tests\n- [ ] Analytics view renders AnalyticsTab when currentView is 'analytics'\n- [ ] handleAnalytics callback sets currentView to 'analytics'\n- [ ] Back navigation from analytics returns to library view\n- [ ] onExpandDashboard opens analytics.html in new tab\n\n### ViewHeader Tests\n- [ ] AnalyticsButton renders with chart icon\n- [ ] AnalyticsButton onClick handler is called\n- [ ] AnalyticsButton has correct aria-label\n- [ ] AnalyticsButton displays in dark mode correctly\n\n### LibraryView Tests\n- [ ] AnalyticsButton appears in header actions\n- [ ] Clicking analytics button calls onAnalytics prop\n- [ ] Analytics button position is before settings button\n\n### Integration Tests\n- [ ] Full flow: Library → Analytics → Full Dashboard → Back\n- [ ] Navigation state is preserved correctly\n\n## Test Files to Update/Create\n- src/components/__tests__/App.test.tsx (if exists, or create)\n- src/components/__tests__/ViewHeader.test.tsx\n- src/components/__tests__/LibraryView.test.tsx\n\n## Acceptance Criteria\n- [ ] All new tests pass\n- [ ] No regression in existing tests\n- [ ] Test coverage for happy path and error cases\n- [ ] TypeScript compiles without errors\n- [ ] Lint passes","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:03:32.368188+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:32:31.103805+01:00","closed_at":"2026-01-13T13:32:31.103805+01:00","close_reason":"Added tests for ViewHeader.AnalyticsButton, App.analytics, and LibraryView","dependencies":[{"issue_id":"My-Prompt-Manager-v5w","depends_on_id":"My-Prompt-Manager-xbk","type":"blocks","created_at":"2026-01-13T13:03:39.374948+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-v5w","depends_on_id":"My-Prompt-Manager-iib","type":"blocks","created_at":"2026-01-13T13:03:47.324619+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-v5w","depends_on_id":"My-Prompt-Manager-m2b","type":"blocks","created_at":"2026-01-13T13:03:47.415027+01:00","created_by":"spartDev"},{"issue_id":"My-Prompt-Manager-v5w","depends_on_id":"My-Prompt-Manager-cok","type":"blocks","created_at":"2026-01-13T13:03:47.506465+01:00","created_by":"spartDev"}]}
{"id":"My-Prompt-Manager-vaf","title":"Create FooterToolbar component","description":"Create new FooterToolbar component (src/components/FooterToolbar.tsx) with Analytics, Categories, Settings buttons and stats display. Props: onAnalytics, onCategories, onSettings, totalPrompts, filteredPrompts, loading. Follow design system glassmorphism and focus-interactive patterns.","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T22:44:53.915428+01:00","created_by":"spartDev","updated_at":"2026-01-14T16:02:48.834132+01:00","closed_at":"2026-01-14T16:02:48.834132+01:00","close_reason":"Created FooterToolbar component with 25 passing tests"}
{"id":"My-Prompt-Manager-vgq","title":"Fix UpdateSettingsMock type using any from StorageChange","description":"UpdateSettingsMock (test-helpers.ts:78-80) uses chrome.storage.StorageChange['newValue'] which resolves to 'any'. Should use Settings type directly.","status":"open","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-21T18:48:51.033419+01:00","created_by":"spartDev","updated_at":"2026-01-21T18:48:51.033419+01:00"}
{"id":"My-Prompt-Manager-vrq","title":"Remove console.log statements from E2E tests","description":"## Problem\nE2E tests contain `console.log` statements for debugging/progress tracking. These clutter test output and don't integrate with Playwright's built-in reporting.\n\n## Current Issues\n`power-user-management.spec.ts` contains:\n```typescript\nconsole.log('[TEST] Starting Scenario 1: Bulk category reorganization');\nconsole.log('[TEST] Starting Scenario 2: Category consolidation');\nconsole.log('[TEST] All power user scenarios validated successfully! 🎉');\n```\n\n## Solution\nReplace console.log with Playwright's `test.step()` for proper test reporting:\n\n**Before:**\n```typescript\nconsole.log('[TEST] Starting Scenario 1: Bulk category reorganization');\n// ... test code\n```\n\n**After:**\n```typescript\nawait test.step('Scenario 1: Bulk category reorganization', async () =\u003e {\n  // ... test code\n});\n```\n\n## Benefits\n- Steps appear in HTML report with timing\n- Better failure diagnostics\n- Cleaner test output\n- Integrates with CI/CD reporters\n\n## Acceptance Criteria\n- [ ] No `console.log` statements in any E2E test files\n- [ ] Scenario steps use `test.step()` where appropriate\n- [ ] All E2E tests pass\n- [ ] HTML report shows step breakdowns","acceptance_criteria":"## Acceptance Criteria\n- [ ] No `console.log` statements in any E2E test files\n- [ ] Scenario steps use `test.step()` where appropriate\n- [ ] All E2E tests pass\n- [ ] HTML report shows step breakdowns","status":"closed","priority":3,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:49.590101+01:00","created_by":"spartDev","updated_at":"2026-01-20T22:16:36.551283+01:00","closed_at":"2026-01-20T22:16:36.551283+01:00","close_reason":"Already completed in commit f9ec6ae"}
{"id":"My-Prompt-Manager-vx1","title":"Split power-user-management.spec.ts into isolated tests","description":"## Problem\n`power-user-management.spec.ts` is a single 440-line test containing 5 scenarios that share state. This violates test isolation principles and makes debugging difficult.\n\n## Current Structure\n```typescript\ntest('should handle advanced prompt organization workflow', async () =\u003e {\n  // Scenario 1: Bulk category reorganization (lines 1-100)\n  // Scenario 2: Category consolidation (lines 101-200)\n  // Scenario 3: Advanced search \u0026 filtering (lines 201-280)\n  // Scenario 4: Bulk prompt operations (lines 281-350)\n  // Scenario 5: Data export for backup (lines 351-440)\n});\n```\n\n## Problems\n1. **State Accumulation**: Each scenario depends on previous scenario's state\n2. **Debugging Difficulty**: Can't run Scenario 4 in isolation\n3. **Flaky Tests**: Failure in Scenario 2 causes all subsequent scenarios to fail\n4. **Slow Feedback**: Must run entire test even if only testing one scenario\n\n## Solution\nSplit into isolated tests with shared setup:\n\n```typescript\ntest.describe('Power User Management', () =\u003e {\n  test.beforeEach(async ({ storage }) =\u003e {\n    await testDataManager.seedForPowerUserTesting();\n  });\n\n  test('should rename category and verify prompts updated', async () =\u003e {});\n  test('should consolidate categories by moving prompts', async () =\u003e {});\n  test('should filter and search across categories', async () =\u003e {});\n  test('should move prompts between categories', async () =\u003e {});\n  test('should export library data for backup', async () =\u003e {});\n});\n```","notes":"## Acceptance Criteria\n- [ ] Each scenario is a separate test function\n- [ ] Tests can run independently in any order\n- [ ] Shared setup in `beforeEach` seeds consistent initial state\n- [ ] No test depends on another test's side effects\n- [ ] All tests pass when run individually: `npx playwright test -g \"scenario name\"`\n- [ ] All tests pass when run in parallel\n- [ ] Test file is under 300 lines (split further if needed)","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:54.730058+01:00","created_by":"spartDev","updated_at":"2026-01-13T11:53:30.504873+01:00","closed_at":"2026-01-13T11:53:30.504873+01:00","close_reason":"Split single 437-line test into 5 isolated tests with shared seed data factory. Tests now run in parallel and can be debugged individually."}
{"id":"My-Prompt-Manager-wu7","title":"Make Clear history button more visible","status":"closed","priority":2,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:51:26.330337+01:00","created_by":"spartDev","updated_at":"2026-01-13T14:03:12.813422+01:00","closed_at":"2026-01-13T14:03:12.813422+01:00","close_reason":"Closed","comments":[{"id":3,"issue_id":"My-Prompt-Manager-wu7","author":"spartDev","text":"Update Clear history button styling in AnalyticsTab.tsx (lines 348-358): Change text-xs to text-sm, text-gray-400 to text-red-500, icon from w-3 h-3 to w-4 h-4, add padding and hover background for better visibility.","created_at":"2026-01-13T12:52:31Z"}]}
{"id":"My-Prompt-Manager-xbk","title":"(EPIC) Analytics View Integration","description":"Integrate AnalyticsTab component into the main app navigation. Currently the analytics components exist but are not accessible from the UI. Users need a way to view their usage analytics from the popup/sidepanel.","status":"closed","priority":2,"issue_type":"epic","owner":"roux.tom@gmail.com","created_at":"2026-01-13T13:02:31.756038+01:00","created_by":"spartDev","updated_at":"2026-01-13T13:32:37.036256+01:00","closed_at":"2026-01-13T13:32:37.036256+01:00","close_reason":"All subtasks completed: analytics view type, button, expand dashboard, and tests"}
{"id":"My-Prompt-Manager-xgk","title":"Add deprecation timeline for legacy checksum format","description":"configurationEncoder.ts:518-525 - The 8-char legacy checksum is weaker than the 16-char SHA-256 one. Need a deprecation path. Add logging when legacy checksums are encountered to track usage before removal.","status":"open","priority":4,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:30:01.887898+01:00","created_by":"spartDev","updated_at":"2026-01-19T23:30:01.887898+01:00"}
{"id":"My-Prompt-Manager-xkr","title":"Standardize locator strategy to role-based selectors","description":"## Problem\nE2E tests use inconsistent locator strategies. Some tests correctly use role-based locators (`getByRole`, `getByLabel`) while others use CSS selectors that are fragile and tied to DOM structure.\n\n## Current Issues\n- `selectors.ts` defines CSS-based selectors like `'heading[name=\"My Prompt Manager\"]'`\n- Tests use `page.locator('div').filter({ hasText: '...' })` patterns\n- `page.locator('input[placeholder=\"Category name\"]')` instead of `getByPlaceholder()`\n\n## Solution\nStandardize on Playwright's recommended locator priority:\n1. `getByRole()` - buttons, headings, links, etc.\n2. `getByLabel()` - form inputs with labels\n3. `getByPlaceholder()` - inputs with placeholder text\n4. `getByText()` - visible text content\n5. `getByTestId()` - only when above options don't work\n\n## Acceptance Criteria\n- [ ] All tests use role-based locators where possible\n- [ ] No CSS class selectors (`.class-name`) in test code\n- [ ] No DOM structure selectors (`div \u003e span`) in test code\n- [ ] `selectors.ts` updated or removed in favor of inline role-based locators\n- [ ] All E2E tests pass after refactoring","acceptance_criteria":"## Acceptance Criteria\n- [ ] All tests use role-based locators where possible\n- [ ] No CSS class selectors (`.class-name`) in test code\n- [ ] No DOM structure selectors (`div \u003e span`) in test code\n- [ ] `selectors.ts` updated or removed in favor of inline role-based locators\n- [ ] All E2E tests pass after refactoring","status":"closed","priority":1,"issue_type":"task","owner":"roux.tom@gmail.com","created_at":"2026-01-12T18:59:44.521776+01:00","created_by":"spartDev","updated_at":"2026-01-12T22:13:39.792211+01:00","closed_at":"2026-01-12T22:13:39.792211+01:00","close_reason":"Standardized locator strategy to role-based selectors across all E2E tests"}
{"id":"My-Prompt-Manager-yrv","title":"Fix nested setState anti-pattern in useToast","description":"useToast.ts:113-114 - Calling setQueue inside setToasts functional update is an anti-pattern causing unpredictable batching.\n\n**Current code:**\n```typescript\nsetToasts(currentToasts =\u003e {\n  if (currentToasts.length === 0) {\n    return [toast];\n  } else {\n    setQueue(prev =\u003e [...prev, toast]); // ❌ setState inside setState\n    return currentToasts;\n  }\n});\n```\n\n**Fix:** Check state outside, then call appropriate setter.","status":"closed","priority":1,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-20T22:33:19.736029+01:00","created_by":"spartDev","updated_at":"2026-01-21T09:23:20.65174+01:00","closed_at":"2026-01-21T09:23:20.65174+01:00","close_reason":"Fixed nested setState anti-pattern by using a ref to track toast count and checking it outside setState"}
{"id":"My-Prompt-Manager-zfx","title":"Fix timezone bug in getPromptStatistics - mixing UTC and local time","description":"promptManager.ts:379-388 - toISOString() returns UTC but setHours() sets LOCAL time. In non-UTC timezones, the dateString and filter range represent different calendar days. This is basic date handling - pick one timezone and stick with it.","status":"closed","priority":0,"issue_type":"bug","owner":"roux.tom@gmail.com","created_at":"2026-01-19T23:29:32.951504+01:00","created_by":"spartDev","updated_at":"2026-01-20T16:00:59.904795+01:00","closed_at":"2026-01-20T16:00:59.904795+01:00","close_reason":"Fixed: all tests pass"}
