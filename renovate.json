{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigests",
    ":semanticCommits",
    ":pinAllExceptPeerDependencies",
    "abandonments:recommended"
  ],
  "timezone": "Europe/Paris",
  "schedule": [
    "before 3am on Monday"
  ],
  "labels": [
    "dependencies",
    "renovate"
  ],
  "assignees": [
    "spartDev"
  ],
  "reviewers": [
    "spartDev"
  ],
  "packageRules": [
    {
      "description": "Group all non-major React updates",
      "groupName": "react packages",
      "groupSlug": "react",
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "matchPackageNames": [
        "/^react/",
        "/^@types/react/"
      ]
    },
    {
      "description": "Group all TypeScript and ESLint updates",
      "groupName": "typescript and linting",
      "groupSlug": "typescript-linting",
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "matchPackageNames": [
        "/typescript/",
        "/eslint/",
        "/@typescript-eslint/"
      ]
    },
    {
      "description": "Group all Vite and build tool updates",
      "groupName": "build tools",
      "groupSlug": "build-tools",
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "matchPackageNames": [
        "/vite/",
        "/@vitejs/",
        "/@crxjs/"
      ]
    },
    {
      "description": "Group all testing library updates",
      "groupName": "testing libraries",
      "groupSlug": "testing",
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "matchPackageNames": [
        "/vitest/",
        "/@testing-library/",
        "/jsdom/"
      ]
    },
    {
      "description": "Group Tailwind CSS updates",
      "groupName": "tailwind and css",
      "groupSlug": "tailwind-css",
      "matchUpdateTypes": [
        "patch",
        "minor"
      ],
      "matchPackageNames": [
        "/tailwind/",
        "/autoprefixer/",
        "/postcss/"
      ]
    },
    {
      "description": "Handle Chrome extension types carefully",
      "matchPackageNames": [
        "@types/chrome"
      ],
      "groupName": "chrome types",
      "automerge": false,
      "prPriority": 5
    },
    {
      "description": "Security updates - high priority",
      "matchDatasources": [
        "npm"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "matchPackageNames": [
        "dompurify"
      ],
      "prPriority": 10,
      "labels": [
        "security",
        "dependencies",
        "renovate"
      ]
    },
    {
      "description": "Pin Chrome extension critical deps",
      "matchPackageNames": [
        "@crxjs/vite-plugin"
      ],
      "automerge": false
    },
    {
      "description": "Major updates - require manual review",
      "matchUpdateTypes": [
        "major"
      ],
      "labels": [
        "major-update",
        "dependencies",
        "renovate"
      ],
      "automerge": false,
      "prPriority": -1
    },
    {
      "description": "Automerge dev dependencies patches",
      "matchDepTypes": [
        "devDependencies"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "pr",
      "platformAutomerge": true
    },
    {
      "description": "Group GitHub Actions updates",
      "matchManagers": [
        "github-actions"
      ],
      "groupName": "github actions",
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "description": "Separate Husky and Git hooks",
      "matchPackageNames": [
        "husky",
        "lint-staged"
      ],
      "groupName": "git hooks",
      "automerge": false
    }
  ],
  "prConcurrentLimit": 3,
  "prHourlyLimit": 2,
  "prCreation": "not-pending",
  "rebaseWhen": "behind-base-branch",
  "semanticCommits": "enabled",
  "commitMessagePrefix": "chore(deps):",
  "commitMessageAction": "update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "vulnerabilityAlerts": {
    "enabled": true,
    "labels": [
      "security",
      "urgent"
    ],
    "assignees": [
      "spartDev"
    ]
  },
  "postUpdateOptions": [
    "npmDedupe"
  ],
  "npm": {
    "minimumReleaseAge": "3 days",
    "packageRules": [
      {
        "matchPackageNames": [
          "react",
          "react-dom"
        ],
        "minimumReleaseAge": "7 days"
      }
    ]
  },
  "ignorePaths": [
    "**/node_modules/**",
    "**/dist/**",
    "**/build/**",
    "**/.husky/**"
  ],
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "ðŸ”„ Dependency Updates Dashboard",
  "dependencyDashboardLabels": [
    "dependencies",
    "renovate-dashboard"
  ],
  "dependencyDashboardFooter": "View [Renovate documentation](https://docs.renovatebot.com/) for more information.",
  "suppressNotifications": [
    "prIgnoreNotification"
  ],
  "prBodyNotes": [
    "**Important**: Please test the extension after merging dependency updates:",
    "1. Run `npm test` to ensure all tests pass",
    "2. Run `npm run build` and test the extension in Chrome",
    "3. Verify the content script works on Claude, ChatGPT, and Perplexity"
  ]
}
